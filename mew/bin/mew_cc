#!/usr/bin/env mew_js
!function(){let e=module.filename;e||(e=module.id);const t=require("\x66s"),s=require("path"),n=require("vm"),i=require("module"),o=/[\\\/]+/g,r=Object.create(null),a=Object.create(null),c=Object.create(null),l=Object.create(null);["child_process","cluster","console","crypto","debugger","dgram","dns","domain","events","\x66s","http","http2","https","inspector","module","net","os","path","per\x66_hooks","process","punycode","querystring","readline","repl","stream","string_decoder","timers","tls","trace_events","tty","url","util","vm","v8","zlib","worker_threads","assert","bu\x66\x66er","constants","mew_util","mewchan"].forEach(e=>{l[e]=!0});const u=function(e){return e.replace(o,"\x2f")},h=function(e){return/^([a-z]:)?[\\\/]/gim.test(e)},x=function(e,t){return t=u(t),e=u(e),t.slice(0,e.length+1)===e+"\x2f"},p=function(n,o){if(o=s.normalize(o),x(e,o)){let t=u(s.relative(e,o));for(let e of["","\x2ejs","\x2ejson"])if(c[t+e])return o+e}else for(let e of[""].concat(Object.keys(i._extensions))){let s=o+e;if(t.existsSync(s)&&t.statSync(s).isFile())return t.realpathSync(s)}},d=function(n,i){let o=void 0;if(x(e,i)){const t=u(s.relative(e,i));if(c[t+"\x2fpackage\x2ejson"]){try{o=b(i+"\x2fpackage\x2ejson").main}catch(e){}o&&(o=s.normalize(s.join(i,o)))}}else if(t.existsSync(i+"\x2fpackage\x2ejson")){try{o=JSON.parse(t.readFileSync(i+"\x2fpackage\x2ejson").toString("ut\x668")).main}catch(e){}o&&(o=s.normalize(s.join(i,mainJS)))}if(o){let e=p(0,o);if(e)return e}let r=p(0,i+"\x2finde\x78");if(r)return r},m=function(t,n){let i=t.filename;if(i||(i=t.id),(n=0===n.length?t?i:e:/^\.(\.?)[\/\\]/.test(n)?i===e?s.normalize(s.join(i,n)):s.normalize(s.join(i,"\x2e\x2e",n)):s.normalize(n))===e||!h(e)&&x(e,n))return n;s.basename(n);let o=function(e,t){if(l[t])return t}(0,n);return o||(h(n)?(o=p(0,n))||d(0,n):function(e,t){for(let n of e.paths){let e=p(0,s.join(n,t));if(e)return e;if(e=d(0,s.join(n,t)))return e}}(t,n))};let f=t.readFile,g=t.readFileSync;const y=new Proxy(t,{get:function(n,i,o){return"readFile"===i?function(n){let i=void 0,o=void 0;switch(arguments.length){case 2:o=arguments[1];break;case 3:i=arguments[1],o=arguments[2]}if(h(n)||(n=s.join(process.cwd(),n)),!x(e,n))return f.apply(t,arguments);let r=u(s.relative(e,n)),c=a[r];void 0!==c?(i&&"string"==typeof i?c=c.toString(i):i&&i.encoding&&(c=c.toString(i.encoding)),process.nextTick(()=>o(void 0,c))):process.nextTick(()=>o(new Error("File\x20not\x20\x66ound")))}:"readFileSync"===i?function(t,n){if(h(t)||(t=s.join(process.cwd(),t)),!x(e,t))return g(t);let i=u(s.relative(e,t)),o=a[i];if(void 0===o)throw new Error("File\x20not\x20\x66ound");return n&&"string"==typeof n?o=o.toString(n):n&&n.encoding&&(o=o.toString(n.encoding)),o}:t[i]}}),b=function(t){if("\x66s"===t)return y;const o=t;if(!(t=m(module,t)))throw new Error(`Module[${JSON.stringify(o)}]\x20not\x20\x66ound`);if(!x(e,t))return i.prototype.require.call(module,t);let a=u(s.relative(e,t)),l=(s.basename(a),s.extname(a));if("\x2ejs"!==l&&"\x2ejson"!==l)throw new Error("Unsupported\x20module\x20e\x78tension\x20in\x20combined\x20script");let h=r[a];if(h)return h.exports;if(!c[a])throw new Error("File\x20not\x20\x66ound");let p={require:function(e){let t=m(p,e);if(t)return b(t);throw new Error("Can't\x20\x66ind\x20module\x20"+e)}};p.require.extensions=i._extensions,p.require.main=process.mainModule,p.require.resolve=function(e){return m(p,e)},p.exports={},p.paths=i._nodeModulePaths(s.dirname(t)),p.filename=t,p.module=p,r[a]=p;let d=0,f=c[a].toString();return"\x66unction\x20\x28module\x2c\x20e\x78ports\x2c\x20require\x2c\x20__dirname\x2c\x20__\x66ilename\x2c\x20__e\x78ports\x29\x20{"!=f.split(/\r|\n|\r\n/)[0]||(d=2),f=`\x28${f}\x29\x28module\x2c\x20e\x78ports\x2c\x20require\x2c\x20__dirname\x2c\x20__\x66ilename\x2c\x20e\x78ports\x29`,n.runInThisContext(i.wrap(f),{filename:t,lineOffset:d,displayErrors:!0}).call(p.exports,p.exports,p.require,p,t,s.dirname(t)),p.exports};c["bin\x2ejs"]=function(e,t,s,n,i,o){s("os");@.process.mode="customized";const r={"\x21de\x66aultTaskMode":"compile","\x21programName":"mew_cc","\x21taskModes":{help:"help",version:"version"},"\x21taskHelp":{prefix:"Program\x20mew_cc\x20targets\x20to\x20help\x20mew_js\x20users\x20to\x20compile\x20sources",modes:{compile:{text:"Compile\x20sources",command:"mew_cc\x20<source>"},help:"Print\x20help\x20te\x78t",version:"Report\x20mew_cc\x20version"},suffix:"More\x20in\x66o\x20is\x20available\x20at\x20https:\x2f\x2fwww\x2emewchan\x2ecom"},settings:{workers:{"\x21valueType":"number","\x21de\x66aultValue":@.process.cpus,"\x21switchTe\x78t":"Parallel\x20workers\x20\x66or\x20compiling"},dir:{"\x21valueType":"string","\x21switchTe\x78t":"Working\x20directory"},sandbox:{"\x21valueType":"boolean","\x21de\x66aultValue":!1,"\x21switchTe\x78t":"Just\x20using\x20ENV\x20sent\x20\x66rom\x20switches\x2c\x20no\x20merge\x20de\x66aults"},action:{"\x21valueType":"string","\x21de\x66aultValue":"build","\x21switchTe\x78t":"Action\x20to\x20do\x20with\x20sources"},scheme:{"\x21valueType":"string","\x21de\x66aultValue":"release","\x21switchTe\x78t":"Build\x20scheme\x2c\x20usually\x20debug\x20or\x20release"},queue:{"\x21valueType":"string","\x21de\x66aultValue":"de\x66ault","\x21switchTe\x78t":"MCC\x20queue\x20to\x20act\x20with\x20action\x20speci\x66ied"},env:{"\x21valueType":"object","\x21objectProperty":{"\x21valueType":"string"},"\x21switchTe\x78t":"ENV\x20settings\x20\x66or\x20child\x20processes"},help:{"\x21valueType":"boolean","\x21de\x66aultValue":!1,"\x21switchTe\x78t":"Force\x20to\x20print\x20help\x20te\x78t"},version:{"\x21valueType":"boolean","\x21de\x66aultValue":!1,"\x21switchTe\x78t":"Force\x20to\x20print\x20mew_chan\x20version\x20te\x78t"}}},a=@.process.switches(r);if("help"===a.mode||a.settings.help)return@.task.printHelp(r),void process.exit(0);if("version"===a.mode||a.settings.version)return@.process.print("mew_cc\x20version\x202\x2e\x31\x2e\x30"),void process.exit(0);const c=s("\x2e\x2finde\x78\x2ejs"),l=s("\x2e\x2futils\x2ejs");let u=Date.now();a.settings.dir?a.settings.dir=@path(a.settings.dir):a.settings.dir=process.cwd();const h={directory:@.fs.posixOSPath(a.settings.dir),workers:a.settings.workers,sandbox:a.settings.sandbox,action:a.settings.action,scheme:a.settings.scheme,queue:a.settings.queue,environments:a.settings.env,brushes:a.brushes,content:a.options};if(h.environments||(h.environments=Object.create(null)),!h.sandbox){const e=Object.create(null);e.OLDPWD=!0,e.PWD=!0,e.SHLVL=!0,e._=!0,e.TERM_PROGRAM=!0,e.TERM_PROGRAM_VERSION=!0,e.TERM_SESSION_ID=!0,e.SSH_AUTH_SOCK=!0,e.SSH_AGENT_PID=!0,e.SECURITYSESSIONID=!0,e.WINDOWID=!0,e.GDMSESSION=!0,e.GNOME_DESKTOP_SESSION_ID=!0,e.SESSION_MANAGER=!0,e.DBUS_SESSION_BUG_ADDRESS=!0,Object.keys(process.env).forEach(t=>{e[t]||Object.hasOwnProperty.call(h.environments,t)||(h.environments[t]=process.env[t])})}@info("Compiler\x20mew_cc\x20version\x202\x2e\x31\x2e\x30");let x=a.commands;@info(`Starting\x20to\x20${h.action}:\x20`+x.map(e=>e.replace(/[\\\'\" &\|\(\)]/g,e=>"\\"+e)).join("\x20")),new c(h).start(x.map(e=>@path(e))).then(function(e){const t=@path(h.directory,"dist");@.fs.deleteFile.sync(t),@.fs.copyFile.sync(e,t);let s=(Date.now()-u)/1e3,n=Math.floor(s/60),i=Math.floor(n/60),o=(1e3*s%6e4/1e3).toFixed(3)+"\x20secs";s>=60&&(o=Math.floor(s)%60+"\x20secs"),n&&(o=n%60+"\x20mins\x20"+o),i&&(o=i+"\x20hours\x20"+o),@info(`Succeeded\x20to\x20${h.action}:\x20`+x.map(e=>e.replace(/[\\\'\" &\|\(\)]/g,e=>"\\"+e)).join("\x20")+"\x20within\x20"+o),@.delay(100,function(){process.exit()})}).rejected(function(e){if(@error(e),e.command){let t=void 0;e.stderr&&(t=e.stderr.toString("ut\x668").trim()),!t&&e.stdout&&(t=e.stdout.toString("ut\x668").trim()),t&&@error(t),@error(l.formatCommand(e.command,e.switches,!1,"windows"===l.hostPlatform).split("\n").map(e=>"\x20\x20"+e).join("\n"))}@.delay(0,function(){process.exit(1)})}),t!==o&&(e.exports=t)},c["ar\x2ejs"]=function(e,t,s,n,i,o){const r=s("\x2e\x2futils\x2ejs"),a=function AR(e,t){this.path=e,this.options=t,this.content=@.merge.advanced({arch:{"\x21valueType":"string","\x21de\x66aultValue":r.hostArch},platform:{"\x21valueType":"string","\x21de\x66aultValue":r.hostPlatform},toolchain:{"\x21valueType":"string"},channel:{"\x21valueType":"string","\x21de\x66aultValue":"target"},command:{"\x21valueType":"string"},switches:{"\x21valueType":"array","\x21de\x66aultValue":[]},linkDirs:{"\x21valueType":"array","\x21de\x66aultValue":[]},libraries:{"\x21valueType":"array","\x21de\x66aultValue":[]},dir:{"\x21valueType":"string","\x21de\x66aultValue":@.fs.posixOSPath(process.cwd())},output:{"\x21valueType":"string"}},t.content),this.content.toolchain||(this.content.toolchain=r.guessCToolchain(this.content.platform))};a.prototype.build=function(e){let t=this.@resolveCommand();const s=a.toolchains[this.content.toolchain].prepare.call(this,e,t,{outputPath:this.content.output}),n=this;return@.async(function(){let e=@.task.execute(s.command,s.switches,!0,(e,t,i)=>{a.toolchains[n.content.toolchain].resolve.call(n,e,t,i,s).pipe(this)});s.input&&e.stdin.end(s.input)})},a.prototype.@analyzeDependencies=function(e){const t={};this.content.libraries.forEach(e=>{if("@"===e[0]){e=e.slice(1);const s=r.getCOutputExtname(this.content.platform,this.content.toolchain,"archive");let n="";if("\x2elib"!==s&&"lib"!==e.slice(0,3)&&(n="lib"),!@.fs.isAbspath(e)){let t=this.content.linkDirs.filter(t=>@.fs.exists.file(@.fs.resolvePath(t,n+e+s)))[0];if(!t)throw new Error("Link\x20library\x20not\x20\x66ound:\x20"+e);e=@.fs.resolvePath(t,n+e+s)}t[e]=!0}});let s=this.@resolveCommand();const n=a.toolchains[this.content.toolchain].prepare.call(this,e,s,{outputPath:this.content.output});return r.resolveCommand(n.command,this.content.dir,this.options.environments).then(function(s){this.next({command:s,switches:n.switches,directory:"\x2e",inputs:e,dependencies:Object.keys(t)})})},a.prototype.@resolveCommand=function(){let e={ar:"host"===this.content.channel?["HOST_AR","AR"]:["AR"]};let t={ar:(t=>{let s=null,n=e[t].filter(e=>this.options.environments[e])[0];if(n&&(s=this.options.environments[n]),!s&&a.toolchains[this.content.toolchain]&&(s=a.toolchains[this.content.toolchain].command),!s)throw new Error("Unknown\x20command\x20\x66or\x20"+t);return s})("ar")},s=t.ar;for(;-1!==s.indexOf("\x24{");)s=@.format(s,t),t.ar=s;return s.split(/\s+/)},(a.toolchains=Object.create(null)).gnu={command:"ar",prepare:function(e,t,s){let n=(s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"library"},outputPath:{"\x21valueType":"string"}},s)).outputPath;n||(n=@.fs.changeExtname(this.path,r.getCOutputExtname(this.content.platform,"msvc",s.target)));var i=["\x2dM"];t.slice(1).forEach(e=>{i.push(e)});var o=["create\x20'"+n+"'"];return e.forEach(e=>{o.push("addmod\x20'"+r.formatPathForCommand(this.content.dir,e,!0)+"'")}),this.content.libraries.forEach(e=>{if("@"===e[0]){let t="";if("lib"!==(e=e.slice(1)).slice(0,3)&&(t="lib"),!@.fs.isAbspath(e)){let s=this.content.linkDirs.filter(s=>@.fs.exists.file(@.fs.resolvePath(s,t+e+"\x2ea")))[0];if(!s)throw new Error("Link\x20library\x20not\x20\x66ound:\x20"+e);e=@.fs.resolvePath(s,t+e+"\x2ea")}o.push("addlib\x20'"+r.formatPathForCommand(this.content.dir,e,!0)+"'")}}),o.push("save"),o.push("end"),{input:o.join("\n"),inputs:e,outputs:[n],directory:"\x2e",command:t[0],switches:i}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.llvm={command:"libtool",prepare:function(e,t,s){let n=s.outputPath;n||(n=@.fs.changeExtname(this.path,r.getCOutputExtname(this.content.platform,"msvc","archive")));var i=t.slice(1).concat(this.content.switches);return i.push("\x2dstatic"),i.push("\x2do"),i.push(r.formatPathForCommand(this.content.dir,n,!0)),e.forEach(e=>{i.push(r.formatPathForCommand(this.content.dir,e,!0))}),this.content.libraries.forEach(e=>{if("@"===e[0]){let t="";if("lib"!==(e=e.slice(1)).slice(0,3)&&(t="lib"),!@.fs.isAbspath(e)){let s=this.content.linkDirs.filter(s=>@.fs.exists.file(@.fs.resolvePath(s,t+e+"\x2ea")))[0];if(!s)throw new Error("Link\x20library\x20not\x20\x66ound:\x20"+e);e=@.fs.resolvePath(s,t+e+"\x2ea")}i.push(r.formatPathForCommand(this.content.dir,e,!0))}}),{inputs:e,outputs:[n],directory:"\x2e",command:t[0],switches:i}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.msvc={command:"lib",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"library"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);n.push("\x2fnologo");let i=s.outputPath;i||(i=@.fs.changeExtname(this.path,r.getCOutputExtname(this.content.platform,"msvc","archive"))),n.push("\x2fOUT:"+r.formatPathForCommand(this.content.dir,i)),e.forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e))}),this.content.libraries.forEach(e=>{if("@"===e[0]){if(e=e.slice(1),!@.fs.isAbspath(e)){let t=this.content.linkDirs.filter(t=>@.fs.exists.file(@.fs.resolvePath(t,e+"\x2elib")))[0];if(!t)throw new Error("Link\x20library\x20not\x20\x66ound:\x20"+e);e=@.fs.resolvePath(t,e+"\x2elib")}n.push(r.formatPathForCommand(this.content.dir,e,!0))}});var o=i+"\x2ein";return@.fs.makeDirs(@.fs.dirname(o)),@.fs.writeFile.sync(o,n.join("\n")),{inputs:e,outputs:[i],directory:"\x2e",command:t[0],switches:["@"+r.formatPathForCommand(this.content.dir,o)]}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.extnames=["\x2eo","\x2eobj","\x2ea","\x2elib"],a.id="ar",e.exports=a,t!==o&&(e.exports=t)},c["as\x2ejs"]=function(e,t,s,n,i,o){const r=s("\x2e\x2futils\x2ejs");var a=function(e,t){if(this.path=e,this.options=t,this.content=@.merge.advanced({scheme:{"\x21valueType":"string","\x21de\x66aultValue":"release"},arch:{"\x21valueType":"string","\x21de\x66aultValue":r.hostArch},platform:{"\x21valueType":"string","\x21de\x66aultValue":r.hostPlatform},toolchain:{"\x21valueType":"string"},channel:{"\x21valueType":"string","\x21de\x66aultValue":"target"},command:{"\x21valueType":"string"},switches:{"\x21valueType":"array","\x21de\x66aultValue":[]},dialect:{"\x21valueType":"string"},macros:{"\x21valueType":"object","\x21de\x66aultValue":{}},includeDirs:{"\x21valueType":"array","\x21de\x66aultValue":[]},dir:{"\x21valueType":"string","\x21de\x66aultValue":@.fs.posixOSPath(process.cwd())},target:{"\x21valueType":"string","\x21de\x66aultValue":"object"},output:{"\x21valueType":"string"}},t.content),this.content.toolchain||(this.content.toolchain=r.guessCToolchain(this.content.platform)),!this.content.dialect)switch(@.fs.extname(this.path).toLowerCase()){case"\x2easm":this.content.dialect="intel";break;case"\x2es":default:"\x7886"===this.content.arch||this.content.arch,this.content.dialect="att"}};a.prototype.build=function(e){this.@resolveCommand(this.content.target);const t=this;return this.@prepareAnalysis(e,this.content.target).then(function(e){r.executeCommand(e.command,e.switches,t.options.dir,t.options.environments).then(function(s,n,i){a.toolchains[t.content.toolchain].resolve.call(t,s,n,i,e).pipe(this)}).pipe(this)})},a.prototype.@prepareAnalysis=function(e,t){let s=this.@resolveCommand(t),n=this;return@.async(function(){let i=a.toolchains[n.content.toolchain].prepare.call(n,e,s,{target:t,outputPath:n.content.output});r.resolveCommand(i.command,n.content.dir,n.options.environments).then(function(e){i.command=e,this.next(i)}).pipe(this)})},a.prototype.@analyzeDependencies=function(e){this.@resolveCommand("code");return this.@prepareAnalysis(e,this.content.target).then(function(t){this.next({command:t.command,switches:t.switches,directory:"\x2e",inputs:e,dependencies:[]})})},a.prototype.@resolveCommand=function(e){let t={as:"host"===this.content.channel?["HOST_AS","AS"]:["AS"]};let s={arch:this.content.arch};return@.format((e=>{let s=null,n=t[e].filter(e=>this.options.environments[e])[0];if(n&&(s=this.options.environments[n]),!s&&a.toolchains[this.content.toolchain]&&(s=a.toolchains[this.content.toolchain].command),!s)throw new Error("Unknown\x20command\x20\x66or\x20"+this.content.toolchain);return s})("as"),s).split(/\s+/)},(a.toolchains=Object.create(null)).msvc={command:"ml\x24{i\x66\x28arch\x20==\x20'\x7886_64'\x2c\x20'64'\x2c\x20''\x29}",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"object"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);n.push("\x2fnologo"),n.push("\x2fZd"),n.push("\x2fCp"),n.push("\x2fc");let i=s.outputPath;return i||(i=@.fs.changeExtname(@.fs.resolvePath(this.content.dir,this.path),r.getCOutputExtname(this.content.platform,this.content.toolchain,s.target))),n.push("\x2fFo"),n.push(r.formatPathForCommand(this.content.dir,i,!0)),e.forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e,!0))}),{inputs:e,outputs:[i],directory:"\x2e",command:t[0],switches:n}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.extnames=["\x2es","\x2easm"],a.id="as",e.exports=a,t!==o&&(e.exports=t)},c["cc\x2ejs"]=function(e,t,s,n,i,o){const r=s("\x2e\x2futils\x2ejs"),a=function CC(e,t){if(this.path=e,this.options=t,this.content=@.merge.advanced({scheme:{"\x21valueType":"string","\x21de\x66aultValue":"release"},arch:{"\x21valueType":"string","\x21de\x66aultValue":r.hostArch},platform:{"\x21valueType":"string","\x21de\x66aultValue":r.hostPlatform},toolchain:{"\x21valueType":"string"},channel:{"\x21valueType":"string","\x21de\x66aultValue":"target"},command:{"\x21valueType":"string"},switches:{"\x21valueType":"array","\x21de\x66aultValue":[]},dialect:{"\x21valueType":"string"},macros:{"\x21valueType":"object","\x21de\x66aultValue":{}},includeDirs:{"\x21valueType":"array","\x21de\x66aultValue":[]},linkDirs:{"\x21valueType":"array","\x21de\x66aultValue":[]},libraries:{"\x21valueType":"array","\x21de\x66aultValue":[]},frameworks:{"\x21valueType":"array","\x21de\x66aultValue":[]},dir:{"\x21valueType":"string","\x21de\x66aultValue":@.fs.posixOSPath(process.cwd())},target:{"\x21valueType":"string","\x21de\x66aultValue":"object"},output:{"\x21valueType":"string"}},t.content),this.content.toolchain||(this.content.toolchain=r.guessCToolchain(this.content.platform)),!this.content.dialect)switch(@.fs.extname(this.path).toLowerCase()){case"\x2ec":this.content.dialect="c";break;case"\x2ecpp":case"\x2ec\x78\x78":case"\x2ecc":this.content.dialect="c\x78\x78";break;case"\x2em":this.content.dialect="objc";break;default:this.content.dialect="c\x78\x78"}};a.prototype.build=function(e){let t=this.@resolveCompiler(this.content.target);this.@resolveCommand(this.content.target);const s=this;return this.@prepareAnalysis(e,this.content.target).then(function(e){r.executeCommand(e.command,e.switches,s.options.dir,s.options.environments).then(function(n,i,o){a.toolchains[s.content.toolchain][t].resolve.call(s,n,i,o,e).pipe(this)}).pipe(this)})},a.prototype.@prepareAnalysis=function(e,t){this.@resolveCompiler(t);this.@resolveCommand(t);let s=this;return@.async(function(){let n=s.@prepareCommand(e,t);r.resolveCommand(n.command,s.content.dir,s.options.environments).then(function(e){n.command=e,this.next(n)}).pipe(this)})},a.prototype.@prepareCommand=function(e,t){const s=this.@resolveCompiler(t);let n=this.@resolveCommand(t);return a.toolchains[this.content.toolchain][s].prepare.call(this,e,n,{target:t,outputPath:this.content.output})},a.prototype.@analyzeDependencies=function(e){const t=this.@resolveCompiler("code");this.@resolveCommand("code");const s=this;return this.@prepareAnalysis(e,"code").then(function(e){@.task.execute(e.command,e.switches,!0,(n,i,o)=>{a.toolchains[s.content.toolchain][t].resolve.call(s,n,i,o,e).pipe(this)})}).then(function(t){let n={};"library"!==s.content.target&&"e\x78ecutable"!==s.content.target||this.content.libraries.forEach(e=>{if("@"!==e[0]){let t=r.getCOutputExtname(this.content.platform,this.content.toolchain,"library");"\x2edll"===t&&"msvc"===this.content.toolchain&&(t="\x2elib");let s="";if("\x2elib"!==t&&"\x2edll"!==t&&"lib"!==e.slice(0,3)&&(s="lib"),!@.fs.isAbspath(e)){let i=this.content.linkDirs.filter(n=>@.fs.exists.file(@.fs.resolvePath(n,s+e+t)))[0];if(i)return e=@.fs.resolvePath(i,s+e+t),void(n[e]=!0)}}"@"===e[0]&&(e=e.slice(1)),(e=>{const t=r.getCOutputExtname(this.content.platform,this.content.toolchain,"archive");let s="";if("\x2elib"!==t&&"lib"!==e.slice(0,3)&&(s="lib"),!@.fs.isAbspath(e)){let n=this.content.linkDirs.filter(n=>@.fs.exists.file(@.fs.resolvePath(n,s+e+t)))[0];if(!n)return!1;e=@.fs.resolvePath(n,s+e+t)}return n[e]=!0,!0})(e)||(e=@.fs.resolvePath(@.fs.tempPath(),prefix+e+extname),n[e]=!0)}),s.@prepareAnalysis(e,s.content.target).then(function(s){this.next({command:s.command,switches:s.switches,directory:"\x2e",inputs:e,dependencies:t.allIncludeds.slice(0).concat(Object.keys(n))})}).pipe(this)})},a.prototype.@resolveCompiler=function(e){let t="c"===this.content.dialect?"cc":"c\x78\x78";return"code"===e&&(t="cpp"),t},a.prototype.@resolveCommand=function(e){let t={cc:"host"===this.content.channel?["HOST_CC","CC"]:["CC"],cxx:"host"===this.content.channel?["HOST_CXX","CXX"]:["CXX"],cpp:"host"===this.content.channel?["HOST_CPP","CPP"]:["CPP"]};const s=e=>{let s=null,n=t[e].filter(e=>this.options.environments[e])[0];if(n&&(s=this.options.environments[n]),!s&&a.toolchains[this.content.toolchain]&&(s=a.toolchains[this.content.toolchain][e].command),!s)throw new Error("Unknown\x20command\x20\x66or\x20"+e);return s};let n={cc:s("cc"),cxx:s("c\x78\x78"),cpp:s("cpp")},i=this.@resolveCompiler(e),o=n[i];for(;-1!==o.indexOf("\x24{");)o=@.format(o,n),n[i]=o;return o.split(/\s+/)},(a.toolchains=Object.create(null)).gnu={},a.toolchains.gnu.cc={command:"gcc",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"object"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);switch(Object.keys(this.content.macros).forEach(e=>{n.push("\x2dD"+e+"="+this.content.macros[e])}),this.content.includeDirs.forEach(e=>{n.push("\x2dI"+r.formatPathForCommand(this.content.dir,e,!0))}),"object"!==s.target&&(this.content.linkDirs.forEach(e=>{n.push("\x2dL"+r.formatPathForCommand(this.content.dir,e,!0))}),this.content.libraries.forEach(e=>{"@"===e[0]&&(e=e.slice(1)),n.push("\x2dl"+e)})),s.target){case"code":n.push("\x2dw"),n.push("\x2dH");break;case"assembly":n.push("\x2dS");break;case"object":n.push("\x2dc");break;case"library":n.push("\x2dshared");break;case"e\x78ecutable":break;default:throw new Error("Invalid\x20target\x20"+s.target)}let i=s.outputPath;return i||(i=@.fs.changeExtname(@.fs.resolvePath(this.content.dir,this.path),r.getCOutputExtname(this.content.platform,this.content.toolchain,s.target))),"code"!==s.target&&(n.push("\x2do"),n.push(r.formatPathForCommand(this.content.dir,i,!0))),e.forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e,!0))}),{inputs:e,outputs:[i],directory:"\x2e",command:t[0],switches:n}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.gnu.cxx={command:"g\x2b\x2b",prepare:a.toolchains.gnu.cc.prepare,resolve:a.toolchains.gnu.cc.resolve},a.toolchains.gnu.cpp={command:"\x24{c\x78\x78}\x20\x2dE",prepare:a.toolchains.gnu.cc.prepare,resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}var o=Object.create(null);s.toString("ut\x668").split("\n").filter(e=>"\x2e\x20"===e.substring(0,2)).map(e=>@.fs.posixOSPath(@.fs.realOSPath(e.substring(2).trim()))).forEach(e=>{o[e]=!0});var a=Object.create(null);return s.toString("ut\x668").split("\n").filter(e=>"\x2e"===e[0]).map(e=>@.fs.posixOSPath(@.fs.realOSPath(e.split("\x20").slice(1).join("\x20").trim()))).forEach(e=>{a[e]=!0}),@.async.resolve({inputs:n.inputFiles,includeds:Object.keys(o),allIncludeds:Object.keys(a),directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.llvm={},a.toolchains.llvm.cc={command:"clang",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"object"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);switch("c"===this.content.dialect&&(n=n.filter(e=>"\x2dstd"!==e.split("=")[0])),Object.keys(this.content.macros).forEach(e=>{n.push("\x2dD"+e+"="+this.content.macros[e])}),this.content.includeDirs.forEach(e=>{let t=r.formatPathForCommand(this.content.dir,e,!0);t||(t="\x2e"),n.push("\x2dI"+t)}),"object"!==s.target&&(this.content.linkDirs.forEach(e=>{n.push("\x2dL"+r.formatPathForCommand(this.content.dir,e,!0))}),this.content.libraries.forEach(e=>{"@"===e[0]&&(e=e.slice(1)),n.push("\x2dl"+e)})),this.content.frameworks.forEach(e=>{n.push("\x2d\x66ramework"),n.push(e)}),s.target){case"code":n.push("\x2dw"),n.push("\x2dH");break;case"assembly":n.push("\x2dS");break;case"object":n.push("\x2dc");break;case"library":n.push("\x2dshared");break;case"e\x78ecutable":break;default:throw new Error("Invalid\x20target\x20"+s.target)}let i=s.outputPath;return i||(i=@.fs.changeExtname(@.fs.resolvePath(this.content.dir,this.path),r.getCOutputExtname(this.content.platform,this.content.toolchain,s.target))),"code"!==s.target&&(n.push("\x2do"),n.push(r.formatPathForCommand(this.content.dir,i,!0))),e.forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e,!0))}),{inputs:e,outputs:[i],directory:"\x2e",command:t[0],switches:n}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.llvm.cxx={command:"clang\x2b\x2b",prepare:a.toolchains.llvm.cc.prepare,resolve:a.toolchains.llvm.cc.resolve},a.toolchains.llvm.cpp={command:"\x24{c\x78\x78}\x20\x2dE",prepare:a.toolchains.llvm.cc.prepare,resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}var o=Object.create(null);s.toString("ut\x668").split("\n").filter(e=>"\x2e\x20"===e.substring(0,2)).map(e=>@.fs.posixOSPath(@.fs.realOSPath(e.substring(2).trim()))).forEach(e=>{o[e]=!0});var a=Object.create(null);return s.toString("ut\x668").split("\n").filter(e=>"\x2e"===e[0]).map(e=>@.fs.posixOSPath(@.fs.realOSPath(e.split("\x20").slice(1).join("\x20").trim()))).forEach(e=>{a[e]=!0}),@.async.resolve({inputs:n.inputFiles,includeds:Object.keys(o),allIncludeds:Object.keys(a),directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.msvc={},a.toolchains.msvc.cc={command:"cl",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"object"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);switch(n.push("\x2fnologo"),Object.keys(this.content.macros).forEach(e=>{n.push("\x2fD"+e+"="+this.content.macros[e])}),this.content.includeDirs.forEach(e=>{let t=r.formatPathForCommand(this.content.dir,e);t||(t="\x2e"),n.push("\x2fI"+t)}),s.target){case"code":n.push("\x2fshowIncludes");break;case"assembly":break;case"object":n.push("\x2fc");break;case"library":n.push("\x2fLD");break;case"e\x78ecutable":break;default:throw new Error("Invalid\x20target\x20"+s.target)}let i=s.outputPath;i||(i=@.fs.changeExtname(@.fs.resolvePath(this.content.dir,this.path),r.getCOutputExtname(this.content.platform,this.content.toolchain,s.target))),e.forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e))});let o=null;if("code"!==s.target){let e={assembly:"\x2fFa",object:"\x2fFo",library:"\x2fFe",executable:"\x2fFe"}[s.target];n.push(e+r.formatPathForCommand(this.content.dir,i)),n.push("\x2fZi"),n.push("\x2fFS");let t=!1;"library"===s.target&&(n.push("\x2flink"),t=!0,o=@.fs.changeExtname(i,"\x2elib"),n.push("\x2fIMPLIB:"+r.formatPathForCommand(this.content.dir,o,!0))),"library"!==s.target&&"e\x78ecutable"!==s.target||(t||n.push("\x2flink"),this.content.linkDirs.forEach(e=>{n.push("\x2fLIBPATH:"+r.formatPathForCommand(this.content.dir,e))}),"object"!==s.target&&this.content.libraries.forEach(e=>{"@"===e[0]&&(e=e.substring(1)),n.push(e+"\x2elib")}))}let a=[i];return"library"===s.target&&a.push(o),{inputs:e,outputs:a,directory:"\x2e",command:t[0],switches:n}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.msvc.cxx={command:"cl",prepare:a.toolchains.msvc.cc.prepare,resolve:a.toolchains.msvc.cc.resolve},a.toolchains.msvc.cpp={command:"\x24{c\x78\x78}\x20\x2fEP",prepare:a.toolchains.msvc.cc.prepare,resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}let o=s.toString("ut\x668").split("\n").filter(e=>0===e.indexOf("Note:\x20including\x20\x66ile:\x20")),a=Object.create(null);o.filter(e=>"\x20"!==e.split("Note:\x20including\x20\x66ile:\x20")[1][0]).map(e=>e.split("Note:\x20including\x20\x66ile:\x20")[1].trim()).map(function(e){return@.fs.posixOSPath(@.fs.realOSPath(e.trim()))}).forEach(e=>{a[e]=!0});let c=Object.create(null);return o.map(e=>e.split("Note:\x20including\x20\x66ile:\x20")[1].trim()).map(function(e){return@.fs.posixOSPath(@.fs.realOSPath(e.trim()))}).forEach(e=>{c[e]=!0}),@.async.resolve({inputs:n.inputs,includeds:Object.keys(a),allIncludeds:Object.keys(c),directory:"\x2e",command:n.command,switches:n.switches})}},a.extnames=["\x2ec","\x2ecc","\x2ec\x78\x78","\x2ecpp"],a.id="cc",e.exports=a,t!==o&&(e.exports=t)},c["inde\x78\x2ejs"]=function(e,t,s,n,i,o){const r=s("\x2e\x2fmcc\x2ejs"),a=function MewCC(e){this.options=e};a.prototype.start=function(e){e&&0!==e.length||(e=["\x2e"]);let t=this.options.action;t||(t="build");const s=e.map(e=>@path(this.options.directory,e)),n=[];if(a.testers.forEach(e=>{let t=void 0;for(let n of s){let s=e(n);if(s){if(t&&t!==s)return;t=s}}!t||-1!==n.indexOf(t)||this.options.compiler&&this.options.compiler!==t.id||n.push(t)}),n.length>1)return@.async.reject(new Error("Multiple\x20compilers["+n.map(e=>e.id).join("\x2c\x20")+"]\x20\x66ound\x20\x66or\x20\x66iles:\x20"+s.join("\x2c\x20")));if(0===n.length)return@.async.reject(new Error("No\x20compiler\x20\x66ound\x20\x66or\x20\x66iles:\x20"+s.join("\x2c\x20")));const i=this.options;return@.async(function(){const e=n[0],o=new e(s[0],i);if(!o[t]||!@.is(o[t],Function))throw new Error("No\x20action["+t+"]\x20\x66ound\x20\x66or\x20compiler["+e.id+"]");o[t](s).pipe(this)})},a.compilers=r.compilers,a.testers=r.testers,a.install=r.install,e.exports=a,t!==o&&(e.exports=t)},c["ld\x2ejs"]=function(e,t,s,n,i,o){const r=s("\x2e\x2futils\x2ejs"),a=function LD(e,t){this.path=e,this.options=t,this.content=@.merge.advanced({arch:{"\x21valueType":"string","\x21de\x66aultValue":r.hostArch},platform:{"\x21valueType":"string","\x21de\x66aultValue":r.hostPlatform},toolchain:{"\x21valueType":"string"},channel:{"\x21valueType":"string","\x21de\x66aultValue":"target"},command:{"\x21valueType":"string"},switches:{"\x21valueType":"array","\x21de\x66aultValue":[]},linkDirs:{"\x21valueType":"array","\x21de\x66aultValue":[]},libraries:{"\x21valueType":"array","\x21de\x66aultValue":[]},frameworks:{"\x21valueType":"array","\x21de\x66aultValue":[]},dir:{"\x21valueType":"string","\x21de\x66aultValue":@.fs.posixOSPath(process.cwd())},linker:{"\x21valueType":"string","\x21de\x66aultValue":"c\x78\x78"},target:{"\x21valueType":"string","\x21de\x66aultValue":"library"},output:{"\x21valueType":"string"}},t.content),this.content.toolchain||(this.content.toolchain=r.guessCToolchain(this.content.platform))};a.prototype.build=function(e){let t=this.@resolveLinker(this.content.target),s=this.@resolveCommand(this.content.target);const n=a.toolchains[this.content.toolchain][t].prepare.call(this,e,s,{target:this.content.target,outputPath:this.content.output}),i=this;return@.async(function(){@.task.execute(n.command,n.switches,!0,(e,s,o)=>{a.toolchains[i.content.toolchain][t].resolve.call(i,e,s,o,n).pipe(this)})})},a.prototype.@analyzeDependencies=function(e){const t={};this.content.libraries.forEach(e=>{const s=r.getCOutputExtname(this.content.platform,this.content.toolchain,"archive");let n="";"\x2elib"!==s&&"lib"!==e.slice(0,3)&&(n="lib");if("@"!==e[0]){let s=r.getCOutputExtname(this.content.platform,this.content.toolchain,"library");"\x2edll"===s&&"msvc"===this.content.toolchain&&(s="\x2elib");let n="";if("\x2elib"!==s&&"\x2edll"!==s&&"lib"!==e.slice(0,3)&&(n="lib"),!@.fs.isAbspath(e)){let i=this.content.linkDirs.filter(t=>@.fs.exists.file(@.fs.resolvePath(t,n+e+s)))[0];if(i)return e=@.fs.resolvePath(i,n+e+s),void(t[e]=!0)}}"@"===e[0]&&(e=e.slice(1)),(e=>{if(!@.fs.isAbspath(e)){let t=this.content.linkDirs.filter(t=>@.fs.exists.file(@.fs.resolvePath(t,n+e+s)))[0];if(!t)return!1;e=@.fs.resolvePath(t,n+e+s)}return t[e]=!0,!0})(e)||(e=@.fs.resolvePath(@.fs.tempPath(),n+e+s),t[e]=!0)});let s=this.@resolveLinker(this.content.target),n=this.@resolveCommand(this.content.target);const i=a.toolchains[this.content.toolchain][s].prepare.call(this,e,n,{target:this.content.target,outputPath:this.content.output});return r.resolveCommand(i.command,this.content.dir,this.options.environments).then(function(s){this.next({command:s,switches:i.switches,directory:"\x2e",inputs:e,dependencies:Object.keys(t).slice(0)})})},a.prototype.@resolveLinker=function(){return"c\x78\x78"===this.content.linker?"c\x78\x78":"ld"},a.prototype.@resolveCommand=function(){let e={cxx:"host"===this.content.channel?["HOST_CXX","CXX"]:["CXX"],ld:"host"===this.content.channel?["HOST_LD","LD"]:["LD"]};const t=t=>{let s=null,n=e[t].filter(e=>this.options.environments[e])[0];if(n&&(s=this.options.environments[n]),!s&&a.toolchains[this.content.toolchain]&&(s=a.toolchains[this.content.toolchain][t].command),!s)throw new Error("Unknown\x20command\x20\x66or\x20"+t);return s};let s={cxx:t("c\x78\x78"),ld:t("ld")},n=this.@resolveLinker(),i=s[n];for(;-1!==i.indexOf("\x24{");)i=@.format(i,s),s[n]=i;return i.split(/\s+/)},(a.toolchains=Object.create(null)).gnu={},a.toolchains.gnu.cxx={command:"g\x2b\x2b",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"library"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);switch(e.sort().forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e,!0))}),this.content.linkDirs.forEach(e=>{n.push("\x2dL"+r.formatPathForCommand(this.content.dir,e,!0))}),n.push("\x2dWl\x2c\x2d\x2dstart\x2dgroup"),this.content.libraries.forEach(e=>{"@"===e[0]&&(e=e.slice(1)),n.push("\x2dl"+e)}),n.push("\x2dWl\x2c\x2d\x2dend\x2dgroup"),s.target){case"code":n.push("\x2dw"),n.push("\x2dH");break;case"assembly":n.push("\x2dS");break;case"object":n.push("\x2dc");break;case"library":n.push("\x2dshared");break;case"e\x78ecutable":break;default:throw new Error("Invalid\x20target\x20"+s.target)}let i=s.outputPath;return i||(i=@.fs.changeExtname(this.path,r.getCOutputExtname(this.content.platform,"gnu",s.target))),"code"!==s.target&&(n.push("\x2do"),n.push(r.formatPathForCommand(this.content.dir,i,!0))),{inputs:e,outputs:[i],directory:"\x2e",command:t[0],switches:n}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.gnu.ld={command:"ld"},a.toolchains.llvm={},a.toolchains.llvm.cxx={command:"clang\x2b\x2b",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"library"},outputPath:{"\x21valueType":"string"}},s);var n=t.slice(1).concat(this.content.switches);switch(this.content.linkDirs.forEach(e=>{n.push("\x2dL"+r.formatPathForCommand(this.content.dir,e,!0))}),this.content.libraries.forEach(e=>{"@"===e[0]&&(e=e.slice(1)),n.push("\x2dl"+e)}),this.content.frameworks.forEach(e=>{n.push("\x2d\x66ramework"),n.push(e)}),s.target){case"code":n.push("\x2dw"),n.push("\x2dH");break;case"assembly":n.push("\x2dS");break;case"object":n.push("\x2dc");break;case"library":n.push("\x2dshared");break;case"e\x78ecutable":break;default:throw new Error("Invalid\x20target\x20"+s.target)}let i=s.outputPath;return i||(i=@.fs.changeExtname(this.path,r.getCOutputExtname(this.content.platform,"llvm",s.target))),"code"!==s.target&&(n.push("\x2do"),n.push(r.formatPathForCommand(this.content.dir,i,!0))),e.sort().forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e,!0))}),{inputs:e,outputs:[i],directory:"\x2e",command:t[0],switches:n}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.llvm.ld={command:"lld"},a.toolchains.msvc={},a.toolchains.msvc.cxx={command:"cl",prepare:function(e,t,s){s=@.merge.advanced({target:{"\x21valueType":"string","\x21de\x66aultValue":"library"},outputPath:{"\x21valueType":"string"}},s);var n=[];switch(n.push("\x2fnologo"),s.target){case"library":n.push("\x2fLD");break;case"e\x78ecutable":break;default:throw new Error("Invalid\x20target\x20"+s.target)}let i=s.outputPath;i||(i=@.fs.changeExtname(this.path,r.getCOutputExtname(this.content.platform,"msvc",s.target)));let o=null,a={library:"\x2fFe",executable:"\x2fFe"}[s.target];n.push(a+r.formatPathForCommand(this.content.dir,i)),n.push("\x2fZi"),n.push("\x2fFS"),e.forEach(e=>{n.push(r.formatPathForCommand(this.content.dir,e))});let c=!1;"library"!==s.target&&"e\x78ecutable"!==s.target||(c=!0,n.push("\x2flink"),o=@.fs.changeExtname(i,"\x2elib"),n.push("\x2fIMPLIB:"+r.formatPathForCommand(this.content.dir,o,!0))),c||(c=!0,n.push("\x2flink")),t.slice(1).concat(this.content.switches).forEach(e=>{n.push(e)}),this.content.linkDirs.forEach(e=>{n.push("\x2fLIBPATH:"+r.formatPathForCommand(this.content.dir,e))}),this.content.libraries.forEach(e=>{"@"===e[0]&&(e=e.substring(1)),n.push(e+"\x2elib")});let l=[i];"e\x78ecutable"!==s.target&&"library"!==s.target||this.content.noExports||l.push(o);var u=i+"\x2ein";return@.fs.makeDirs(@.fs.dirname(u)),@.fs.writeFile.sync(u,n.join("\n")),{inputs:e,outputs:l,directory:"\x2e",command:t[0],switches:["@"+r.formatPathForCommand(this.content.dir,u)]}},resolve:function(e,t,s,n){if(e){var i=r.commandError(n.command,n.switches,t,s);return@.async.reject(i)}return@.async.resolve({inputs:n.inputs,dependencies:n.dependencies,outputs:n.outputs,directory:"\x2e",command:n.command,switches:n.switches})}},a.toolchains.msvc.ld={command:"link"},a.extnames=["\x2eo","\x2eobj","\x2ea","\x2elib","\x2eso","\x2edll","\x2edylib","\x2e\x66ramework","\x2ebc"],a.id="ld",e.exports=a,t!==o&&(e.exports=t)},c["mcc\x2ejs"]=function(e,t,s,n,i,o){@import("js\x2eeval");const r=s("\x2e\x2futils\x2ejs"),a=s("\x2e\x2fas\x2ejs"),c=s("\x2e\x2fcc\x2ejs"),l=s("\x2e\x2far\x2ejs"),u=s("\x2e\x2fld\x2ejs"),h=function MCC(e,t,s){if(this.path=e,this.options=@.merge.simple(t),s||(s={mccs:Object.create(null),files:Object.create(null),scans:Object.create(null),signatures:Object.create(null),candidates:Object.create(null),histories:Object.create(null)}),this.caches=s,this.caches.mccs[this.path])return this.caches.mccs[this.path];this.caches.mccs[this.path]=this,this.queues=Object.create(null),this.content={},this.templateOptions=@.format.opts({functors:@.merge.simple(MCC.functors,this.content["\x21\x66unctors"]),mcc:this})};h.prototype.build=function(e){this.@initialContent(e);const t=this.options.queue;t||(t="de\x66ault");const s=this;return@.async(function(){@info("Checking\x20dependencies"),s.@checkDependencies(t,s.options.content).then(function(e){for(let t in e){let s=Object.keys(e[t]);if(s.length>1)throw@error(e[t]),new Error(`Con\x66licts\x20on\x20dependency[${t}]:\x20${s.length}\x20versions`)}this.next()}).pipe(this)}).then(function(){@info("Preparing\x20\x66iles\x20inde\x78"),r.scanFiles(s.options.directory,s.options.directory,[],s.caches),s.@startQueue(t,s.options.content).pipe(this)}).then(function(){Object.keys(h.summaries).sort().forEach(function(e){@info("Procedure\x20"+e+"\x20called\x20"+h.summaries[e].times+"\x20times")}),this.next.apply(this,arguments)})},h.prototype.@extractUsableContents=function(e){let t={};Object.keys(this.content).forEach(e=>{"@"!==e[0]&&(t[e]=this.content[e])});let s=this.content,n=Object.create(null),i=e=>{n[e]||(n[e]=!0,s["@"+e]["\x21merges"]&&s["@"+e]["\x21merges"].forEach(e=>{i(e)}))};s["\x21merges"]&&s["\x21merges"].forEach(e=>{i(e)}),i(e);for(let e in n)t["@"+e]=s["@"+e];return t},h.prototype.@initialContent=function(e){if(this.initialized)return;if(e||(e=[this.path]),e.length>1)throw new Error("Multiple\x20mcc\x20\x66ile\x20is\x20invalid\x2c\x20@brush\x2ejs\x20could\x20be\x20used\x20to\x20merge\x20mcc\x20and\x20brush\x20JS\x20\x66iles");let t=e.map(e=>(e=@path(this.options.directory,e),@require(e,@.fs.readFile.sync(e,"ut\x668"))));this.content=@.merge.apply(@,t),this.templateOptions=@.format.opts({functors:@.merge.simple(h.functors,this.content["\x21\x66unctors"]),mcc:this});let s=this.path+"@ready\x24target";this.content.suffix&&(s+="["+this.content.suffix+"]"),this.initial=this.@loadQueue({mcc:this,queue:this.@parseQueue(s)},"ready",!0),this.scheme=this.options.scheme,this.initial.variants.scheme=this.scheme,this.initialized=!0},h.prototype.@checkDependencies=function(e,t,s){this.@initialContent(),s||(s=Object.create(null));const n=e.mcc===this?e:this.@loadQueue(this.initial,e,!1,t);let i=this.@getValue("deps",n,{},h.Dictionary),o=n.queue.toString();o=r.getIDPath(this.options.directory,o.split("@")[0])+"@"+o.split("@").slice(1).join("@");let a=this.@getValue("vars",n,{},h.Dictionary);s[o]||(s[o]=Object.create(null)),s[o][r.sha1Hash(a)]=a;const c=this;return@.async.all(Object.keys(i),function(e){let t=c.@loadQueue(n,e,!1,i[e]);t.mcc.@checkDependencies(t,void 0,s).pipe(this)}).resolve(s)},h.prototype.@startQueue=function(e,t){this.@initialContent();const s=this,n=e.mcc===this?e:this.@loadQueue(this.initial,e,!1,t);if(n.mccu=@path(n.build,@.fs.basename(n.queue.file)+"\x2emccu"),"building"===n.state){let e=null,t=!1;return@.async(function(){e=this,t&&e.test(t[0])})}if("built"===n.state)return@.async.resolve();if("demaged"===n.state)return@.async.reject(new Error("MCC\x20built\x20\x66ailed"));if("pending"!==n.state)return@.async.reject(new Error("Invalid\x20queue\x20state\x20"+n.state));h.recordProcedureCall("MCC"),n.state="building";let i=this.@getValue("deps",n,{},h.Dictionary),o=this.@getValue("pipeline",n,void 0,h.List);o||(o=["cc","ld"]);let a=[],c=[],l=s.@getValue("dir",n,void 0,h.Value);l=l?@path(s.options.directory,l):s.options.directory;let u=n.queue.toString(),p=u=r.getIDPath(s.options.directory,u.split("@")[0])+"@"+u.split("@").slice(1).join("@"),d=@.merge.simple(this.caches,{state:{inputs:Object.create(null),dependencies:Object.create(null),outputs:Object.create(null),triggers:Object.create(null)},recheckDependencies:!1,recheckContents:!1}),m=Object.create(null);Object.create(null);n.hasContentChanges=!1,n.hasOutputsChanges=!1;let f=s.@extractUsableContents(n.queue.queue),g=r.sha1Hash({options:JSON.stringify(@.merge.simple(this.options,{queue:n.queue.queue,content:f})),starter:t,brushes:this.options.brushes.map(e=>(e=@path(this.options.directory,e),{path:@.fs.rootBasedPath(this.options.directory,e),content:@.fs.readFile.sync(e).toString("ut\x668")}))});const y=function(e){if(!@.is.nil(e)){if(@.is(e,String))return s.@parseTemplate(e,n.variants);if(@.is(e,Array))return e.map(e=>y(e));if(@.is(e,Number)||@.is(e,Boolean)||@.is(e,RegExp)||@.is(e,Date))return e;if(!@.is(e,Function)){let t={};return Object.keys(e).forEach(i=>{if("\x21brushes"===i){let o={};Object.keys(e[i]).forEach(t=>{if(!x[t]){if(!/^([a-z0-9-_]*:)?\$\{.*\}$/.test(t))throw new Error("Invalid\x20brush\x20template:\x20"+t);{let e=t.split("\x24").slice(1).join("\x24").slice(1,-1),n=t.split("\x24")[0].slice(0,-1),i=@.format.tmpl.compile(e,s.templateOptions,!0);x[t]={template:e,name:n,call:i}}}let r=x[t];@.format.tmpl(r.call,n.variants,s.templateOptions,!0)&&(o[(r.name?r.name+"\x2d":"")+@.uuid().slice(-6)+":\x24{true}"]=y(e[i][t]))}),t["\x21brushes"]=o}else{let o=s.@parseTemplate(i,n.variants),r=y(e[i]);t[o]=r}}),t}}};return@.async.all(Object.keys(i),function(e){let t=s.@loadQueue(n,e,!1,i[e]);t.mcc.@startQueue(t,i[e]).then(function(){t.exports.forEach(e=>{n.imports.push(e)});let e=t.queue.toString(),i=@.fs.rootBasedPath(s.options.directory,e.split("@")[0]);e=i+"@"+e.split("@").slice(1).join("@"),m[e]={file:i,name:t.queue.queue,channel:t.queue.channel,suffix:t.queue.suffix,mccu:@.fs.rootBasedPath(s.options.directory,t.mccu),build:@.fs.rootBasedPath(s.options.directory,t.build),dist:@.fs.rootBasedPath(s.options.directory,t.dist),outputs:t.usages.outputs.slice(0).sort()},t.hasContentChanges&&(@debug(`Contents\x20changed\x20in\x20${p}'s\x20dependency[${e}]`),n.hasContentChanges=!0),t.hasOutputsChanges&&(@debug(`Outputs\x20changed\x20in\x20${p}'s\x20dependency[${e}]`),d.recheckDependencies=!0),this.next()}).pipe(this)}).then(function(){@info("Starting\x20queue\x20"+u);let e=@.merge.simple({queue:n.variants.queue,scheme:n.variants.scheme,options:n.variants.options},t);delete n.variants,n.variants=@.merge.simple(e,s.@getValue("vars",n,{},h.Dictionary)),@.fs.makeDirs(n.build);let i=s.@getValue("ignores",n,[],h.List);const o=s.@getValue("srcs",n,[],h.List),x=o.filter(e=>-1!==e.indexOf("\x2a")||-1!==e.indexOf("\x2f\x2f")).map(e=>@.as(e,"rege\x78\x2dpath")),p=o.filter(e=>-1===e.indexOf("\x2a")&&-1===e.indexOf("\x2f\x2f"));let d="\x2e";l&&(d=@.fs.rootBasedPath(s.options.directory,l)),"\x2e"===d?@info("Scanning\x20\x66iles"):@info("Scanning\x20\x66iles\x20in\x20"+d);let m=[];o.length>0&&(r.scanFiles(s.options.directory,l,i,s.caches,e=>{m.push(e)}).filter(e=>{a.push(e);const t=@.fs.rootBasedPath(@.fs.realOSPath(l),@.fs.realOSPath(e));let s=!1,n=p.indexOf(t);for(;-1!==n;)p.splice(n,1),n=p.indexOf(t),s=!0;if(s)return!0;for(let e of x)if(e.test(t))return!0;return!1}).forEach(e=>{c.push(@path(e))}),p.forEach(e=>{c.push(@path(l,e))})),this.next(m,o)}).then(function(e,t){if(@info("Checking\x20queue\x20"+u),@.fs.exists.file(n.mccu)){d.triggeds=Object.create(null),@.async(function(){@.async(function(){d.oldMCCUContent=JSON.parse(@.fs.readFile.sync(n.mccu).toString("ut\x668")),d.oldMCCUContent.mcci&&(d.oldMCCIContent=JSON.parse(@.fs.readFile.sync(@.fs.resolvePath(s.options.directory,d.oldMCCUContent.mcci)).toString("ut\x668"))),g!==d.oldMCCUContent.sha1&&(@debug("Signature\x20changed"),d.recheckContents=!0);let i=Object.keys(d.oldMCCUContent.subqueues).sort();if(r.sha1Hash(Object.keys(m).sort())!==r.sha1Hash(i))@debug("Subqueue\x20list\x20changed"),d.recheckDependencies=!0;else for(let e of i){let t=d.oldMCCUContent.subqueues[e].outputs.slice(0).sort(),s=m[e].outputs.slice(0).sort();r.sha1Hash(t)!==r.sha1Hash(s)&&(@debug(`Subqueue[${e}]\x20\x66iles\x20changed`),d.recheckDependencies=!0)}if(t.length>0){let t=Object.create(null);for(let e of d.oldMCCUContent.ignores){let n=@path(s.options.directory,e);@.fs.isAbspath(@.fs.rootBasedPath(l,n))||(t[n]=!0)}for(let e in d.oldMCCUContent.inputs){let n=@path(s.options.directory,e);@.fs.isAbspath(@.fs.rootBasedPath(l,n))||(t[n]=!0)}for(let e in d.oldMCCUContent.dependencies){let n=@path(s.options.directory,e);@.fs.isAbspath(@.fs.rootBasedPath(l,n))||(t[n]=!0)}for(let e of a)t[e]?delete t[e]:(@debug(`New\x20\x66ile\x20appeared:\x20${e}`),d.recheckDependencies=!0);for(let s of e)delete t[s];if(Object.keys(t).length>0){for(let e in t)@debug(`File\x20removed:\x20${e}`);d.recheckDependencies=!0}}@.async.all(Object.keys(d.oldMCCUContent.inputs),function(e){let t=@path(s.options.directory,e);d.candidates[t]=d.oldMCCUContent.inputs[e],r.getFileSignature(t,d,!1,!0).then(function(t){t.sha1!==d.oldMCCUContent.inputs[e].sha1&&(@debug(`Content\x20changed:\x20${e}`),n.hasContentChanges=!0),this.next()}).pipe(this)}).all(Object.keys(d.oldMCCUContent.dependencies),function(e){let t=@path(s.options.directory,e);d.candidates[t]=d.oldMCCUContent.dependencies[e],r.getFileSignature(t,d,!1,!0).then(function(t){t.sha1!==d.oldMCCUContent.dependencies[e].sha1&&(@debug(`Dependency\x20changed:\x20${e}`),n.hasContentChanges=!0),this.next()}).pipe(this)}).all(Object.keys(d.oldMCCUContent.triggers),function(e){let t=@path(s.options.directory,e);r.getFileSignature(t,d,!1,!0).then(function(s){s.sha1!==d.candidates[t].sha1&&Object.keys(d.oldMCCUContent.triggers[e]).forEach(e=>{let t=e.split(":")[0],s=e.split(":").slice(1).join(":");d.triggeds[t]||(d.triggeds[t]=Object.create(null)),d.triggeds[t][s]=!0}),this.next()}).pipe(this)}).pipe(this)}).catch(this)}).then(function(e){e&&(@warn("Failed\x20to\x20read\x20latest\x20MCCU\x20record"),@warn(e),d.recheckDependencies=!0),this.next()}).pipe(this)}else d.recheckDependencies=!0,this.next()}).then(function(){(d.recheckDependencies||d.recheckContents)&&(n.hasContentChanges=!0,delete d.triggeds),this.next()}).then(function(){n.hasContentChanges?@.async(function(){let e=@.merge.simple(n.variants,{inputs:c}),t=s.@getValue("preactions",n,void 0,h.List,null,e);s.@executeActions(l,n,"preact",t,d,e).pipe(this)}).all(o,function(e){if(!h.processors[e])throw new Error("Processor\x20"+e+"\x20not\x20\x66ound");h.processors[e].call(s,{queue:n.queue,directory:l,caches:d,getAbsolutePath:function(e){return@path(l,e)},getIDPath:function(e,t){return t&&(e=@.fs.changeExtname(e,t)),r.getIDPath(s.options.directory,e)},getBuildPath:function(e,t){return r.resolvePath(n.build,s.options.directory,e,t)},getDistPath:function(e){return r.resolvePath(n.dist,s.options.directory,e,extname)},getValueGetter:function(t){t=t?@.merge.simple(n.variants,t):n.variants;let i={values:Object.create(null),lists:Object.create(null),dictionaries:Object.create(null)};return{getVariant:function(e,s){let n=t[e];return void 0!==n?n:s},getValue:function(o,r){let a=null;return i.values[o]?a=i.values[o].value:(a=s.@getValue([e,o],n,void 0,h.Value,null,t),i.values[o]={value:a}),void 0!==a?a:r},getRawList:function(o,r){let a=null;return i.lists[o]?a=i.lists[o].value:(a=s.@getValue([e,o],n,void 0,h.RawList,null,t),i.lists[o]={value:a}),a||r},getList:function(o,r){let a=null;return i.lists[o]?a=i.lists[o].value:(a=s.@getValue([e,o],n,void 0,h.List,null,t),i.lists[o]={value:a}),a||r},getDictionary:function(o,r){let a=null;return i.dictionaries[o]?a=i.dictionaries[o].value:(a=s.@getValue([e,o],n,void 0,h.Dictionary,null,t),i.dictionaries[o]={value:a}),r||(r={}),a||r}}}},c).then(function(e){c=e.outputs,this.next()}).pipe(this)}).then(function(){let e=@.merge.simple(n.variants,{outputs:c}),t=s.@getValue("postactions",n,void 0,h.List,null,e);s.@executeActions(l,n,"postact",t,d,e).pipe(this)}).then(function(){@info("Constructing\x20distributions"),@.fs.makeDirs(n.dist);let e=@.merge.simple(n.variants,{outputs:c});const t=s.@getValue("dists",n,{},h.Dictionary,null,e);@.async.all(Object.keys(t),function(e){const i=@.fs.resolvePath(n.dist,e).split("\x21")[0];let o=t[e];@.fs.isAbspath(o)||(o=@.fs.realOSPath(l)+"\x2f"+o);let a=o,c=!1,u=null;if(-1!==o.indexOf("\x2a")||-1!==o.indexOf("\x2f\x2f"))a=o.split("\x2a")[0].split("\x2f\x2f")[0],u=@.as(o,"rege\x78\x2dpath");else{if(!@.fs.exists(a))throw new Error("File\x20not\x20\x66ound:\x20"+a);c=@.fs.exists.file(o)}let h=[];h=c?[o]:@.fs.scanFiles.sync(a,1/0,e=>{if("dir"===e.type){return"dist"!==@.fs.rootBasedPath(@.fs.realOSPath(s.options.directory),@.fs.realOSPath(e.path))}return"\x66ile"===e.type&&(!u||u.test(e.path))}).filter(e=>"\x66ile"===e.type).map(e=>@path(e.path)),@.async.all(h,function(e){if(!@.fs.exists(e))throw new Error("Output\x20\x66ile\x20not\x20e\x78ists:\x20"+e);@.fs.makeDirs(@.fs.dirname(e));let t=i;c||(t=@path(i,@.fs.rootBasedPath(a,e))),@.async(function(){r.getFileSignature(e,d).then(function(t){d.state.inputs[@.fs.rootBasedPath(s.options.directory,e)]=t,this.next(t)}).pipe(this)}).then(function(n){@.async(function(){r.getFileSignature(t,d).catch(this)}).then(function(i,o){i||n.sha1!==o.sha1?(@info("CP\x20"+r.getIDPath(s.options.directory,t)),@.fs.makeDirs(@.fs.dirname(t)),@.fs.deleteFile.sync(t),@.fs.copyFile(e,t).pipe(this)):this.next()}).pipe(this)}).pipe(this)}).pipe(this)}).pipe(this)}).then(function(){@info("Resolving\x20e\x78ports");let e=Object.create(null);const t=n=>{let i=n.queue.toString();e[n.queue.file]||(e[n.queue.file]={exports:y(n.mcc.content["\x21e\x78ports"]),queues:Object.create(null)});let o=e[n.queue.file].queues;o[i]||(n.mcc.content["\x21merges"]&&n.mcc.content["\x21merges"].forEach(e=>{let i=s.@loadQueue(n,s.@parseTemplate(e,n.variants));t(i)}),o[i]={exports:y(n.mcc.content["@"+n.queue.queue]["\x21e\x78ports"])},n.mcc.content["@"+n.queue.queue]["\x21merges"]&&n.mcc.content["@"+n.queue.queue]["\x21merges"].forEach(e=>{let i=s.@loadQueue(n,s.@parseTemplate(e,n.variants));t(i)}))};t(n),n.exports=[],Object.keys(e).forEach(t=>{e[t].exports&&n.exports.push(e[t].exports),Object.keys(e[t].queues).forEach(s=>{e[t].queues[s].exports&&n.exports.push(e[t].queues[s].exports)})}),n.exports.length>0?(n.mcci=@path(n.dist,@.fs.basename(n.queue.file)+"\x2emcci"),@.fs.writeFile(n.mcci,JSON.stringify(n.exports,null,4)).pipe(this)):this.next()}).then(function(){@info("Recording\x20\x66ile\x20usages");let e=Object.create(null);for(let t of a)e[r.cacheRootBasedPath(s.options.directory,t)]=!0;let t={},i={},o={},c={};for(let e in d.state.outputs)o[e]=!0;for(let s in d.state.inputs)d.state.outputs[s]||(e[s]?t[s]=d.state.inputs[s]:i[s]=d.state.inputs[s]);for(let s in d.state.dependencies)d.state.outputs[s]||(e[s]?t[s]=d.state.dependencies[s]:i[s]=d.state.dependencies[s]);const l=e=>{let t={};for(let s in d.state.triggers[e]){t[s]=!0;for(let n of d.state.triggers[e][s])d.state.triggers[n]&&(t=Object.assign(t,l(n)))}return t};for(let e in d.state.triggers)o[e]||(c[e]=l(e));n.usages={sha1:g,inputs:t,dependencies:i,triggers:c,internals:Object.keys(o),outputs:@.fs.scanFiles.sync(n.dist,1/0,e=>!0).filter(e=>"\x66ile"===e.type).map(e=>r.cacheRootBasedPath(s.options.directory,e.path,!0))},n.mcci&&(n.usages.mcci=r.cacheRootBasedPath(s.options.directory,n.mcci)),d.oldMCCUContent&&r.sha1Hash(n.usages.outputs.slice(0).sort())===r.sha1Hash(d.oldMCCUContent.outputs.slice(0).sort())||(@debug("Output\x20list\x20has\x20changed"),n.hasOutputsChanges=!0),n.usages.ignores=a.map(e=>@.fs.rootBasedPath(s.options.directory,e)).filter(e=>!d.state.inputs[e]&&!d.state.dependencies[e]&&!d.state.outputs[e]&&-1===n.usages.outputs.indexOf(e)),n.usages.subqueues=m,@.fs.writeFile(n.mccu,JSON.stringify(n.usages,null,4)).pipe(this)}).then(function(){@celebr("Succeeded\x20to\x20\x66inish\x20queue\x20"+u),this.next()}).pipe(this):(@celebr("Skipped\x20queue\x20"+u+"\x20\x66or\x20no\x20changes\x20happened"),n.usages=d.oldMCCUContent,n.exports=d.oldMCCIContent,n.exports||(n.exports=[]),this.next())}).then(function(){n.state="built";let e=n.listeners;n.listeners=[],e.forEach(e=>{try{e(null,n.dist)}catch(e){@error(e)}}),this.next(n.dist)}).rejected(function(e){n.state="demaged";let t=n.listeners;n.listeners=[],t.forEach(t=>{try{t(e)}catch(e){@error(e)}})})},h.prototype.@loadQueue=function(e,t,s,n){t=this.@parseQueue(e.queue,t),this.caches.mccs[t.file]||(this.caches.mccs[t.file]=new h(t.file,@.merge.simple(this.options,{brushes:[],content:{}}),this.caches));let i=t.toString();if(i===e.queue.toString()&&!s)return e;if(this.caches.mccs[t.file].queues[i])return this.caches.mccs[t.file].queues[i];const o=this.caches.mccs[t.file],r=i.split("@").slice(1).join("@"),a=("\x30\x30\x30\x30\x30"+@.hash(t.toString()).toString(16)).slice(-6),c=["cc\x2dbuild",this.scheme+"\x2d"+@.fs.basename(t.file),r,a].join("\x2e"),l=["cc\x2ddist",this.scheme+"\x2d"+@.fs.basename(t.file),r,a].join("\x2e");let u={mcc:o,magic:a,queue:t,state:"pending",listeners:[],imports:[],build:@path(o.options.directory,"build",c),dist:@path(o.options.directory,"build",l)},x={};return e.variants&&(x={hostArch:e.variants.hostArch,hostPlatform:e.variants.hostPlatform,hostCToolchain:e.variants.hostCToolchain,targetArch:e.variants.targetArch,targetPlatform:e.variants.targetPlatform,targetCToolchain:e.variants.targetCToolchain}),u.variants=@.merge.simple({queue:{id:t.toString(),name:t.queue,file:t.file,channel:t.channel,suffix:t.suffix,magic:a,buildDir:u.build,distDir:u.dist},scheme:o.scheme},x,n),u.variants=@.merge.simple(u.variants,o.@getValue("vars",u,{},h.Dictionary)),this.caches.mccs[t.file].queues[i]=u,u},h.prototype.@parseQueue=function(e,t){const s=function(e){let t=e.split("@");if(1==t.length&&(t=[null,t[0]]),t[1]=t[1].split("\x24"),1===t[1].length){if(t[1]=[t[1][0],null],-1!==t[1][0].indexOf("[")){let e=t[1][0].split("[");t[1][0]=e[0],t[1][1]=[null,e[1].slice(0,-1)]}}else t[1][1]=t[1][1].split("["),1===t[1][1].length?t[1][1]=[t[1][1][0],null]:t[1][1][1]=t[1][1][1].slice(0,-1);return{file:t[0]?t[0]:null,queue:t[1][0],channel:t[1][1]?t[1][1][0]:null,suffix:t[1][1]?t[1][1][1]:null}};let n=e;if(n.queue||(n=s(n)),t){let e=@.merge(n,s(t));e.file!==n.file&&(e.file=@path(n.file,"\x2e\x2e",e.file)),n=e}return n.toString=function(){let e=this.queue;return this.file&&(e=this.file+"@"+e),this.channel&&(e+="\x24"+this.channel),this.suffix&&(e+="["+this.suffix+"]"),e},n},h.prototype.@executeActions=function(e,t,s,n,i,o){if(!n)return@.async.resolve();let a={getValue:function(e,s){let n=c.@getValue(e,t,void 0,h.Value,null,o);return void 0!==n?n:s},getList:function(e,s){let n=c.@getValue(e,t,void 0,h.List,null,o);return n||s},getDictionary:function(e,s){let n=c.@getValue(e,t,void 0,h.Dictionary,null,o);return s||(s={}),n||s}},c=this;return@.async.all(n,function(n,l){let u=@path(t.build,[s,l+1].join("\x2e"))+"\x2esig";r.skipIfTriggersSilent(c.options.directory,i,"act",s+"\x2e"+l,u,()=>{let x=[],p=[],d=[],m=[],f=n.filter(e=>"\x21\x21\x24{"===e.slice(0,4))[0];f=f?@.fs.resolvePath(e,c.@parseTemplate(f.slice(2),@.merge.simple(t.variants,o))):c.options.directory;let g=function(t){let s=@.fs.resolvePath(e,t),n=@.fs.rootBasedPath(c.options.directory,s);return@.fs.isAbspath(n)?s:@.fs.relativePath(f,s)},y=null,b=null,v=null;if(n.forEach(s=>{let n="";@.is(s,Array)&&(n=s[0],s=s[1]);let i=!1,r=null,l=!1;"\x21\x24<\x21{"===s.slice(0,5)?(r="input",i=!0,l=!0,s="\x21\x24{"+s.slice(5)):"\x21\x24\x21>{"===s.slice(0,5)?(r="output",l=!0,i=!0,s="\x21\x24{"+s.slice(5)):"\x24<\x21{"===s.slice(0,4)?(r="input",i=!0,s="\x24{"+s.slice(4)):"\x24\x21>{"===s.slice(0,4)?(r="output",i=!0,s="\x24{"+s.slice(4)):"\x21\x24<{"===s.slice(0,4)?(r="input",l=!0,s="\x21\x24{"+s.slice(4)):"\x21\x24>{"===s.slice(0,4)?(r="output",l=!0,s="\x21\x24{"+s.slice(4)):"\x24<{"===s.slice(0,3)?(r="input",s="\x24{"+s.slice(3)):"\x24\x2e{"===s.slice(0,3)?(r="path",s="\x24{"+s.slice(3)):-1!==s.indexOf("\x24>{")?(r="output",s="\x24{"+s.slice(3)):-1!==s.indexOf("\x21\x21\x24{")?(r="root",i=!0,s=s.slice(2)):-1!==s.indexOf("\x21\x24{")&&(r="root",l=!0);let u=function(t){"2>"===t.slice(0,2)?(v=@.fs.resolvePath(e,t.slice(2)),m.push(v)):">"===t[0]?(b=@.fs.resolvePath(e,t.slice(1)),m.push(b)):"<"===t[0]?(y=@.fs.resolvePath(e,t.slice(1)),p.push(y)):x.push(n+t)};if(-1!==s.indexOf("\x24{"))if(l)@.format.tmpl(s.slice(3,-1),@.merge.simple(t.variants,{getter:a,directory:e},o),c.templateOptions,!0).forEach(t=>{"input"===r?(p.push(@.fs.resolvePath(e,t)),t=g(t)):"output"===r?(m.push(@.fs.resolvePath(e,t)),t=g(t)):"path"===r&&(t=g(t)),i||u(t)});else{let n=c.@parseTemplate(s,@.merge.simple(t.variants,{getter:a,directory:e},o));"input"===r?(p.push(@.fs.resolvePath(e,n)),n=g(n)):"output"===r?(m.push(@.fs.resolvePath(e,n)),n=g(n)):"path"===r&&(n=g(n)),i||u(n)}else u(s)}),"2"===b||"\x31"===v)throw new Error("No\x20support\x20\x66or\x20mi\x78ing\x20stdout\x20and\x20stderr");return r.resolveCommand(x[0],f,c.options.environments).then(function(e){let n={command:e,directory:@.fs.rootBasedPath(c.options.directory,f),switches:x.slice(1),inputs:p,dependencies:d,outputs:m},o=@path(t.build,[s,l+1,@.fs.filename(e)].join("\x2e"));@info("ACT\x20"+@.fs.filename(e)),r.skipIfCacheAvailable(c.options.directory,o,u,n,()=>{let e=r.formatCommand(n.command,n.switches,!1,"windows"===r.hostPlatform).split("\n").map(e=>"\x20\x20"+e).join("\n");return f!==c.options.directory&&(e="\x20\x20CWD="+r.escapeCommandComponent(@.fs.rootBasedPath(c.options.directory,f,!0))+"\x20"+e.trim()),y&&(e=e+"\n\x20\x20\x20\x20<"+r.escapeCommandComponent(@.fs.rootBasedPath(c.options.directory,y,!0))),b&&(e=e+"\n\x20\x20\x20\x20>"+r.escapeCommandComponent(@.fs.rootBasedPath(c.options.directory,b,!0))),v&&(e=e+"\n\x20\x20\x20\x202>"+r.escapeCommandComponent(@.fs.rootBasedPath(c.options.directory,v,!0))),@debug(e),@.async(function(){h.recordProcedureCall("ACT");let e=@.task.execute(n.command,n.switches,f,!0,(e,t,s)=>{if(e){var i=r.commandError(n.command,n.switches,t,s);this.reject(i)}else b&&@.fs.writeFile.sync(b,t),v&&@.fs.writeFile.sync(v,s),this.next(n)});y&&e.stdin.write(@.fs.readFile.sync(y))})},i).resolve(n).pipe(this)})}).then(function(e){r.updateSignatures(c.options.directory,e,i,"act:"+s+"\x2e"+l).resolve(e).pipe(this)}).pipe(this)})};const x=Object.create(null);h.prototype.@getValue=function(e,t,s,n,i,o){let r="",a=e;if(e instanceof Array&&([r,a]=e),i||(i=Object.create(null)),t&&t.queue&&i[t.queue.toString()])return s;t&&t.queue&&(i[t.queue.toString()]=!0);let c=s;const l=()=>{"vars"===e&&(u=c)};let u=o||t.variants;u||(u={scheme:this.scheme}),"vars"===e&&(c=u);const p=(t,s)=>{t&&Object.keys(t).map(n=>{if(x[n]){let i=x[n];return{action:t[n],passed:@.format.tmpl(i.call,u,this.templateOptions,!0),filter:i.template,prefix:s,name:e}}if(/^([a-z0-9-_]*:)?\$\{.*\}$/.test(n)){n.indexOf("\x24");let e=n.split("\x24").slice(1).join("\x24").slice(1,-1),i=n.split("\x24")[0].slice(0,-1),o=@.format.tmpl.compile(e,this.templateOptions,!0);return x[n]={template:e,name:i,call:o},{action:t[n],passed:@.format.tmpl(o,u,this.templateOptions,!0),filter:e,prefix:s,name:i}}throw new Error("Invalid\x20brush\x20tester:\x20"+n)}).filter(e=>e.passed).forEach(e=>{@.is(e.action,Function)?(c=e.action(c,[r,a],u),l()):e.action.action?(c=e.action.action(c,[r,a],u),l()):(c=n.call(this,c,a,e.action,u),l(),r&&(c=n.call(this,c,a+"\x2d"+r,e.action,u),l()))})};return p(h.brushes,"system"),t.imports.forEach(e=>{c=n.call(this,c,a,e,u),l(),r&&(c=n.call(this,c,a+"\x2d"+r,e,u),l()),e["\x21brushes"]&&p(e["\x21brushes"],"import")}),this.content["\x21merges"]&&this.content["\x21merges"].forEach(s=>{let o=this.@loadQueue(t,this.@parseTemplate(s,u));u=@.merge(u,o.variants),c=o.mcc.@getValue(e,o,c,n,i,u),l()}),c=n.call(this,c,a,this.content,u),l(),r&&(c=n.call(this,c,a+"\x2d"+r,this.content,u),l()),p(this.content["\x21brushes"],"mcc"),t&&t.queue&&this.content["@"+t.queue.queue]&&(this.content["@"+t.queue.queue]["\x21merges"]&&this.content["@"+t.queue.queue]["\x21merges"].forEach(s=>{let o=this.@loadQueue(t,this.@parseTemplate(s,u));u=@.merge(u,o.variants),c=o.mcc.@getValue(e,o,c,n,i,u),l()}),c=n.call(this,c,a,this.content["@"+t.queue.queue],u),l(),r&&(c=n.call(this,c,a+"\x2d"+r,this.content["@"+t.queue.queue],u),l()),this.content["@"+t.queue.queue]["\x21brushes"]&&p(this.content["@"+t.queue.queue]["\x21brushes"],"queue")),c};let p=Object.create(null);h.prototype.@parseTemplate=function(e,t){if(!p[e]){if(-1===e.indexOf("\x24{"))return p[e]={type:"te\x78t",cache:e},e;if(/^!\$\{(.+)\}$/.test(e))return@.format.tmpl(e.slice(3,-1),t,this.templateOptions,!0);p[e]={type:"template",cache:@.format.parsers["te\x78t\x2fplain"].compileTemplate(e,this.templateOptions)}}switch(p[e].type){case"template":return@.format.parsers["te\x78t\x2fplain"].parseTemplate(p[e].cache,t,this.templateOptions);case"te\x78t":default:return e}},h.RawList=function(e,t,s,n){if(Object.hasOwnProperty.call(s,t)){e||(e=[]);let i=0;for(;i<s[t].length;){let o=s[t][i];@.is(o,String)&&(o=this.@parseTemplate(o,n)),e.push(o),++i}}return Object.hasOwnProperty.call(s,"\x2d"+t)&&(e||(e=[]),s["\x2d"+t].forEach(t=>{@.is(t,String)&&(t=this.@parseTemplate(t,n));var s=e.indexOf(t);-1!==s&&e.splice(s,1)})),Object.hasOwnProperty.call(s,"="+t)&&(e||(e=[]),e.length=0,s["="+t].forEach(t=>{@.is(t,String)&&(t=this.@parseTemplate(t,n));e.indexOf(newKey);e.push(t)})),e},h.List=function(e,t,s,n){if(Object.hasOwnProperty.call(s,t)){e||(e=[]);let i=0;for(;i<s[t].length;){let o=s[t][i];@.is(o,String)&&(o=this.@parseTemplate(o,n)),-1===e.indexOf(o)&&e.push(o),++i}}return Object.hasOwnProperty.call(s,"\x2d"+t)&&(e||(e=[]),s["\x2d"+t].forEach(t=>{@.is(t,String)&&(t=this.@parseTemplate(t,n));var s=e.indexOf(t);-1!==s&&e.splice(s,1)})),Object.hasOwnProperty.call(s,"="+t)&&(e||(e=[]),e.length=0,s["="+t].forEach(t=>{@.is(t,String)&&(t=this.@parseTemplate(t,n)),-1===e.indexOf(newKey)&&e.push(t)})),e},h.Dictionary=function(e,t,s,n){if(Object.hasOwnProperty.call(s,t)){e||(e={});let i=Object.keys(s[t]),o=0;for(;o<i.length;){let r=i[o],a=this.@parseTemplate(r,n),c=s[t][r];@.is(c,String)&&(c=this.@parseTemplate(c,n)),e[a]=@.merge(e[a],c),++o}}if(Object.hasOwnProperty.call(s,"\x2d"+t)){e||(e={});let i=s["\x2d"+t];@.is(i,Array)||(i=Object.keys(i)),i.forEach(t=>{t=this.@parseTemplate(t,n),delete e[t]})}return Object.hasOwnProperty.call(s,"="+t)&&(e||(e={}),Object.keys(e).forEach(t=>{delete e[t]}),Object.keys(s["="+t]).forEach(i=>{let o=this.@parseTemplate(i,n),r=s["="+t][i];@.is(r,String)&&(r=this.@parseTemplate(r,n)),e[o]=@.merge(e[o],r)})),e},h.Value=function(e,t,s,n){if(Object.hasOwnProperty.call(s,t)){let i=s[t];@.is(i,String)&&(i=this.@parseTemplate(i,n)),@.is(i,String)&&(i=this.@parseTemplate(i,n)),e=@.merge(e,i)}return e},(h.processors=Object.create(null)).cc=function(e,t){let s=[];const n=this,i=e.getValueGetter({inputs:t});return@.async.all(t,n.options.workers,function(t){let o=i.getValue("compiler");if(o||(o={"\x2es":"as","\x2easm":"as","\x2ec":"cc","\x2ecpp":"cc","\x2ecc":"cc","\x2ejava":"javac","\x2erc":"rc"}[@.fs.extname(t).toLowerCase()]),o||(o="cc"),!h.processors.cc.compilers[o])throw new Error("Compiler\x20"+o+"\x20not\x20\x66ound\x20\x66or\x20\x66ile:\x20"+t);h.processors.cc.compilers[o].call(n,e,i,[t]).then(function(e){e.outputs.forEach(e=>{s.push(e)}),this.next()}).pipe(this)}).then(function(){this.next({outputs:s})})},h.processors.cc.compilers=Object.create(null),h.processors.cc.compilers.cc=function(e,t,s){const n=e.queue.channel,i=r.getCConfig(t.getVariant(n+"Arch"),t.getVariant(n+"Plat\x66orm"),t.getVariant(n+"CToolchain")),o=t.getValue("command"),a=t.getRawList("switches",[]),l=t.getValue("dialect"),u=this.scheme,x=t.getValue("target","object");if("code"===x)throw new Error("Invalid\x20target\x20\x66or\x20cc");const p=r.resolveDirectories(e,t.getList("include\x2ddirs",[])).map(t=>e.getAbsolutePath(t)),d=r.resolveDirectories(e,t.getList("link\x2ddirs",[])).map(t=>e.getAbsolutePath(t)),m=t.getDictionary("macros",{}),f=t.getList("libraries",[]),g=t.getList("\x66rameworks",[]),y=e.getBuildPath(s[0],r.getCOutputExtname(i.platform,i.toolchain,x)),b=this;let v=e.getIDPath(y),w=e.getBuildPath(y)+"\x2esig";return r.skipIfTriggersSilent(b.options.directory,e.caches,"cc",@.fs.rootBasedPath(b.options.directory,s[0],!0),w,()=>{@info("CC\x20"+s.map(t=>e.getIDPath(t)).join("\n\x20\x20\x20"));let t=new c(s[0],@.merge.simple(this.options,{content:{arch:i.arch,platform:i.platform,toolchain:i.toolchain,channel:n,scheme:u,command:o,switches:a,dialect:l,macros:m,includeDirs:p,linkDirs:d,libraries:f,frameworks:g,dir:this.options.directory,target:x,output:y}}));return t.@prepareAnalysis(s,x).then(function(n){r.skipIfDependencyAvailable(b.options.directory,v,w,n,()=>t.@analyzeDependencies(s),e.caches).pipe(this)}).then(function(n,i){@.fs.makeDirs(@.fs.dirname(y)),r.skipIfCacheAvailable(b.options.directory,e.getIDPath(y),e.getBuildPath(y)+"\x2esig",n,()=>(@debug(r.formatCommand(n.command,n.switches,!1,"windows"===r.hostPlatform).split("\n").map(e=>"\x20\x20"+e).join("\n")),h.recordProcedureCall("CC"),t.build(s).then(function(e){this.next({inputs:e.inputs,dependencies:n.dependencies,outputs:e.outputs,command:e.command,switches:e.switches})})),e.caches).pipe(this)})}).then(function(t){r.updateSignatures(b.options.directory,t,e.caches,"cc:"+@.fs.rootBasedPath(b.options.directory,s[0],!0)).resolve(t).pipe(this)})},h.processors.cc.compilers.as=function(e,t,s){const n=e.queue.channel,i=r.getCConfig(t.getVariant(n+"Arch"),t.getVariant(n+"Plat\x66orm"),t.getVariant(n+"CToolchain")),o=t.getValue("command"),c=t.getRawList("switches",[]),l=t.getValue("dialect"),u=this.scheme,x=t.getValue("target","object");if("code"===x)throw new Error("Invalid\x20target\x20\x66or\x20cc");const p=r.resolveDirectories(e,t.getList("include\x2ddirs",[])).map(t=>e.getAbsolutePath(t)),d=r.resolveDirectories(e,t.getList("link\x2ddirs",[])).map(t=>e.getAbsolutePath(t)),m=t.getDictionary("macros",{}),f=t.getList("libraries",[]),g=t.getList("\x66rameworks",[]),y=e.getBuildPath(s[0],r.getCOutputExtname(i.platform,i.toolchain,x)),b=this;let v=e.getIDPath(y),w=e.getBuildPath(y)+"\x2esig";return r.skipIfTriggersSilent(b.options.directory,e.caches,"cc",@.fs.rootBasedPath(b.options.directory,s[0],!0),w,()=>{@info("CC\x20"+s.map(t=>e.getIDPath(t)).join("\n\x20\x20\x20"));let t=new a(s[0],@.merge.simple(this.options,{content:{arch:i.arch,platform:i.platform,toolchain:i.toolchain,channel:n,scheme:u,command:o,switches:c,dialect:l,macros:m,includeDirs:p,linkDirs:d,libraries:f,frameworks:g,dir:this.options.directory,target:x,output:y}}));t.@prepareAnalysis(s,x);return t.@prepareAnalysis(s,x).then(function(n){r.skipIfDependencyAvailable(b.options.directory,v,w,n,()=>t.@analyzeDependencies(s),e.caches).pipe(this)}).then(function(n,i){@.fs.makeDirs(@.fs.dirname(y)),r.skipIfCacheAvailable(b.options.directory,e.getIDPath(y),e.getBuildPath(y)+"\x2esig",n,()=>(@debug(r.formatCommand(n.command,n.switches,!1,"windows"===r.hostPlatform).split("\n").map(e=>"\x20\x20"+e).join("\n")),h.recordProcedureCall("AS"),t.build(s).then(function(e){this.next({inputs:e.inputs,dependencies:n.dependencies,outputs:e.outputs,command:e.command,switches:e.switches})})),e.caches).pipe(this)})}).then(function(t){r.updateSignatures(b.options.directory,t,e.caches,"cc:"+@.fs.rootBasedPath(b.options.directory,s[0],!0)).resolve(t).pipe(this)})},h.processors.ld=function(e,t){if(0===t.length)return@.async.reject("No\x20inputs\x20\x66or\x20LD");let s=[];const n=this;return@.async(function(){const i=e.getValueGetter({inputs:t.slice(0)});let o=i.getValue("linker");if(o||(o={"\x2eo":"ld","\x2eobj":"ld","\x2elib":"ld","\x2ea":"ld","\x2eso":"ld","\x2edylib":"ld","\x2e\x66ramework":"ld","\x2eclass":"jar","\x2ejs":"ui","\x2ecss":"ui","\x2ehtml":"ui","\x2e\x78html":"ui"}[@.fs.extname(t[0]).toLowerCase()]),o||(o="ui"),!h.processors.ld.linkers[o])throw new Error("Linker\x20"+o+"\x20not\x20\x66ound");h.processors.ld.linkers[o].call(n,e,i,t).then(function(e){e.outputs.forEach(e=>{s.push(e)}),this.next()}).pipe(this)}).then(function(){this.next({outputs:s})})},h.processors.ld.linkers=Object.create(null),h.processors.ld.linkers.ld=function(e,t,s){s=s.slice(0).sort();const n=e.queue.channel,i=r.getCConfig(t.getVariant(n+"Arch"),t.getVariant(n+"Plat\x66orm"),t.getVariant(n+"CToolchain")),o=t.getValue("target","library"),a=t.getValue("name",e.queue.queue),c=r.getCOutputName(i.platform,i.toolchain,o,a),x=e.getBuildPath(@.fs.resolvePath(e.directory,c)),p=this;let d=e.getBuildPath(x)+"\x2esig";return r.skipIfTriggersSilent(p.options.directory,e.caches,"ld",a,d,()=>{@info("LD\x20"+e.getIDPath(x));const a=t.getValue("command"),c=t.getRawList("switches",[]),m=t.getValue("scheme","release"),f=t.getValue("obj\x2dlinker","c\x78\x78"),g=r.resolveDirectories(e,t.getList("link\x2ddirs",[])).map(t=>e.getAbsolutePath(t)),y=t.getList("libraries",[]),b=t.getList("\x66rameworks",[]),v=t.getValue("no\x2de\x78ports",!1);let w=null;return(w="archive"===o?new l(x,@.merge.simple(this.options,{content:{arch:i.arch,platform:i.platform,toolchain:i.toolchain,channel:n,scheme:m,command:a,switches:c,linkDirs:g,libraries:y,environments:this.options.environments,dir:this.options.directory,output:x,noExports:v}})):new u(x,@.merge.simple(this.options,{content:{arch:i.arch,platform:i.platform,toolchain:i.toolchain,channel:n,scheme:m,command:a,switches:c,linkDirs:g,libraries:y,frameworks:b,linker:f,environments:this.options.environments,dir:this.options.directory,target:o,output:x,noExports:v}}))).@analyzeDependencies(s).then(function(t){@.fs.makeDirs(@.fs.dirname(x)),r.skipIfCacheAvailable(p.options.directory,e.getIDPath(x),d,t,()=>(@debug(r.formatCommand(t.command,t.switches,!1,"windows"===r.hostPlatform).split("\n").map(e=>"\x20\x20"+e).join("\n")),h.recordProcedureCall("archive"===o?"AR":"LD"),w.build(t.inputs).then(function(e){this.next({inputs:t.inputs,dependencies:t.dependencies,outputs:e.outputs,command:e.command,switches:e.switches})})),e.caches).pipe(this)})}).then(function(t){r.updateSignatures(p.options.directory,t,e.caches,"ld:"+a).resolve(t).pipe(this)})},h.summaries=Object.create(null),h.recordProcedureCall=function(e){h.summaries[e]||(h.summaries[e]={times:0}),++h.summaries[e].times},h.brushes={"guess\x2dhost\x2darch:\x24{\x21hostArch}":{vars:{hostArch:"\x24{guessArch\x28\x29}"}},"guess\x2dhost\x2dplat\x66orm:\x24{\x21hostPlat\x66orm}":{vars:{hostPlatform:"\x24{guessPlat\x66orm\x28\x29}"}},"guess\x2dhost\x2dc\x2dtoolchain:\x24{\x21hostCToolchain}":{vars:{hostCToolchain:"\x24{guessCToolchain\x28hostPlat\x66orm\x29}"}},"guess\x2dtarget\x2darch:\x24{\x21targetArch}":{vars:{targetArch:"\x24{de\x66ault\x28hostArch\x2c\x20guessArch\x28\x29\x29}"}},"guess\x2dtarget\x2dplat\x66orm:\x24{\x21targetPlat\x66orm}":{vars:{targetPlatform:"\x24{de\x66ault\x28hostPlat\x66orm\x2c\x20guessPlat\x66orm\x28\x29\x29}"}},"guess\x2dtarget\x2dc\x2dtoolchain:\x24{\x21targetCToolchain}":{vars:{targetCToolchain:"\x24{guessCToolchain\x28de\x66ault\x28targetPlat\x66orm\x2c\x20hostPlat\x66orm\x29\x29}"}},"debug:\x24{scheme\x20==\x20'debug'}":{"macros\x2dcc":{DEBUG:"\x31",_DEBUG:"\x31"}},"release:\x24{scheme\x20==\x20'release'}":{"macros\x2dcc":{NDEBUG:"\x31"}},"release\x2dmsvc:\x24{\x28scheme\x20==\x20'release'\x29\x20\x26\x26\x20\x28getCToolchain\x28\x29\x20==\x20'msvc'\x29}":{"switches\x2dcc":["\x2fO\x78"]},"release\x2dgnu:\x24{\x28scheme\x20==\x20'release'\x29\x20\x26\x26\x20\x28getCToolchain\x28\x29\x20==\x20'gnu'\x29}":{"switches\x2dcc":["\x2dO3"]},"release\x2dllvm:\x24{\x28scheme\x20==\x20'release'\x29\x20\x26\x26\x20\x28getCToolchain\x28\x29\x20==\x20'llvm'\x29}":{"switches\x2dcc":["\x2dO3"]}},h.functors={guessArch:function(e,t,s,n){return r.hostArch},guessPlatform:function(e,t,s,n){return r.hostPlatform},guessCToolchain:function(e,t,s,n,i){return r.guessCToolchain(i||r.hostPlatform)},getCOutputFiles:function(e,t,s,n,i){let o=[];switch(i){case"object":o=["\x2eo","\x2eobj","\x2ebc"];break;case"archive":o=["\x2ea","\x2elib","\x2ejs"];break;case"library":o=["\x2eso","\x2edylib","\x2edll","\x2ejs"];break;case"e\x78ecutable":o=["\x2ee\x78e","\x2ejs",""];break;case"import\x2dlibrary":o=["\x2elib"]}let r=s.outputs.filter(e=>-1!==o.indexOf(@.fs.extname(e)));if(0===r.length)throw new Error("No\x20output\x20\x66ile\x20\x66ound\x20with\x20type\x20"+i);if(r.length>1)throw new Error("Multiple\x20output\x20\x66ile\x20\x66ound\x20with\x20type\x20"+i);return r[0]},formatCOutputName:function(e,t,s,n,i){let o=null;const a=@.fs.basename(i);switch(@.fs.extname(i)){case"\x2eo":case"\x2eobj":o="object";break;case"\x2ea":case"\x2elib":o="archive";break;case"\x2eso":case"\x2edylib":case"\x2edll":case"\x2ejs":o="library";break;case"\x2ee\x78e":case"":o="e\x78ecutable"}let c=null;return c="host"===s.queue.channel?r.getCConfig(s.hostArch,s.hostPlatform,s.hostCToolchain):r.getCConfig(s.targetArch,s.targetPlatform,s.targetCToolchain),r.getCOutputName(c.platform,c.toolchain,o,a)},getBuildPath:function(e,t,s,n,i,o){let r=n.mcc,a=r.@parseQueue(s.queue.id,i);if(!r.caches.mccs[a.file])throw new Error("MCC\x20\x66ile\x20not\x20loaded\x20"+a.file);let c=r.caches.mccs[a.file].queues[a.toString()];return o?@.fs.resolvePath(c.build,o):c.build},getDistPath:function(e,t,s,n,i,o){let r=n.mcc,a=r.@parseQueue(s.queue.id,i);if(!r.caches.mccs[a.file])throw new Error("MCC\x20\x66ile\x20not\x20loaded\x20"+a.file);let c=r.caches.mccs[a.file].queues[a.toString()];return o?@.fs.resolvePath(c.dist,o):c.dist},getRootPath:function(e,t,s,n,i){return@.fs.resolvePath(n.mcc.options.directory,i)},getPlatform:function(e,t,s,n){return s.queue&&"host"===s.queue.channel?s.hostPlatform:s.targetPlatform},getArch:function(e,t,s,n){return s.queue&&"host"===s.queue.channel?s.hostArch:s.targetArch},getCToolchain:function(e,t,s,n){return s.queue&&"host"===s.queue.channel?s.hostCToolchain:s.targetCToolchain}},h.extnames=["\x2emcc"],h.id="mcc",h.compilers=Object.create(null),h.testers=[],h.install=function(e){if(!e.id)throw new Error("No\x20compiler\x20id\x20\x66ound");if(h.compilers[e.id])throw new Error("Compiler\x20duplicated\x20with\x20id\x20"+e.id);e.extnames&&e.extnames.forEach(t=>{h.testers.push(s=>{if(@.fs.extname(s)===t)return e})}),e.tester&&h.testers.push(t=>{if(e.tester(t))return e})},h.CC=c,h.AR=l,h.LD=u,h.AS=a,h.install(h),["\x2e\x2fcc\x2ejs","\x2e\x2fld\x2ejs","\x2e\x2far\x2ejs","\x2e\x2fas\x2ejs"].forEach(e=>{h.install(s(e))}),e.exports=h,t!==o&&(e.exports=t)},c["rc\x2ejs"]=function(e,t,s,n,i,o){t!==o&&(e.exports=t)},c["utils\x2ejs"]=function(e,t,s,n,i,o){const r=s("crypto");let a=Object.create(null);const c=function(e,t){if(e=@.fs.realOSPath(e),t=@path(e,t),a[e]||(a[e]=Object.create(null)),!a[e][t]){let s=@.fs.rootBasedPath(e,t);@.fs.isAbspath(s)&&(s=@path(s)),a[e][t]=s}return a[e][t]},l=function(e,t){if(@.fs.isAbspath(t)&&(t=c(e,t)),!@.fs.isAbspath(t)){let e=t.split("\x2f");return"build"===e[0]?e=e.slice(2):"dist"===e[0]&&(e=e.slice(1)),e.join("\x2f")}return t},u=function(e,t){let s=e.replace(/[ '"\|&\(\)\[\]\{\}\?\\\$]/g,e=>"\\"+e);return t&&"\x2f"===s[0]?"\x2f"+s:s},h=function(e){return{windows:"msvc",linux:"gnu",macos:"llvm",wasm:"llvm",android:"gnu",ios:"llvm"}[e]},x=function(e,t,s){let n={code:"\x2ecpp",assembly:"\x2es",object:"\x2eo",archive:"\x2ea",library:"\x2eso",executable:""};return"wasm"===e?(n.object="\x2ebc",n.executable="\x2ejs"):"windows"===e?("msvc"===t&&(n.assembly="\x2easm",n.archive="\x2elib",n.object="\x2eobj"),n.library="\x2edll",n.executable="\x2ee\x78e"):"macos"===e&&(n.library="\x2edylib"),n[s]},p=function(e,t,s){let n=s.histories[t];if(!n&&@.fs.exists.file(t))try{n=JSON.parse(@.fs.readFile.sync(t).toString("ut\x668")),Object.keys(n.inputs).forEach(t=>{s.candidates[@.fs.resolvePath(e,t)]=n.inputs[t]}),Object.keys(n.dependencies).forEach(t=>{s.candidates[@.fs.resolvePath(e,t)]=n.dependencies[t]}),Object.keys(n.outputs).forEach(t=>{s.candidates[@.fs.resolvePath(e,t)]=n.outputs[t]}),s.histories[t]={record:n}}catch(e){}else n&&(n=n.record);return n},d=function(e){var t=r.createHash("sha\x31");return t.update(JSON.stringify(e)),t.digest("he\x78")},m=function(e,t,s,n){if(!@.fs.exists.file(e))return@.async.reject(new Error("File\x20not\x20e\x78ists:\x20"+e));if(t.signatures[e])return s?@.async.reject(new Error("Output\x20\x66ile\x20has\x20already\x20been\x20used\x20as\x20input\x20be\x66ore:\x20"+e)):@.async.resolve(t.signatures[e]);let i={};return@.async(function(){if(t.files[e])i.date=t.files[e];else{let t=@.fs.fileStats(e);i.date=@.format.date(t.modifyTime,"YYYY\x2dMM\x2dDD\x20hh:mm:ss\x2eSSS")}this.next()}).then(function(){t.candidates[e]&&i.date===t.candidates[e].date?this.next(t.candidates[e].sha1):this.next()}).then(function(t){t?(i.sha1=t,this.next()):@.fs.hash.sha1(e).then(function(e){i.sha1=e,this.next()}).pipe(this)}).then(function(){n||(t.signatures[e]=i),this.next(i)})},f=Object.create(null),g=@.mem.weakMap(),y=function(e,t,s){if(-1!==e.indexOf("\x2f")||-1!==e.indexOf("\\"))return@.async.resolve(e);let n=g.get(s);return n||(n=d(s),g.put(s,n)),f[n]||(f[n]=Object.create(null)),f[n][t]||(f[n][t]=Object.create(null)),@.async(function(){if(@.fs.isAbspath(e))this.next(e);else if(f[n][t][e])this.next(f[n][t][e]);else{let s=@.task.resolve(e);s?(s=c(t,s),f[n][t][e]=s,this.next(s)):this.reject(new Error("Command\x20not\x20\x66ound:\x20"+e))}})},b={win32:"windows",linux:"linu\x78",darwin:"macos"}[process.platform],v={x64:"\x7886_64",x86_64:"\x7886_64",x86:"\x7886",arm:"arm",armv7:"arm",arm64:"arm_64"}[process.arch];e.exports={skipIfDependencyAvailable:function(e,t,s,n,i,o){let r=p(e,s,o),a=!0;return r&&!o.recheckDependencies||(a=!1),a&&(n.command!==r.command&&(a=!1),JSON.stringify(n.switches)!==JSON.stringify(r.switches)&&(a=!1)),@.async(function(){a?@.async.all(Object.keys(r.inputs),-1,function(t){let s=@.fs.resolvePath(e,t);@.fs.exists.file(s)?m(s,o,!1,!0).then(function(e){r.inputs[t].sha1!==e.sha1&&(a=!1),this.next()}).pipe(this):(a=!1,this.next())}).all(r.dependencies,-1,function(t){let s=@.fs.resolvePath(e,t);@.fs.exists.file(s)?m(@.fs.resolvePath(e,t),o,!1,!0).then(function(e){r.dependencies[t].sha1!==e.sha1&&(a=!1),this.next()}).catch(this):(a=!1,this.next())}).pipe(this):this.next()}).then(function(){a?this.next({command:r.command,switches:r.switches,directory:r.directory,inputs:Object.keys(r.inputs),dependencies:Object.keys(r.dependencies)}):i().pipe(this)}).then(function(e){this.next(e,r)})},skipIfCacheAvailable:function(e,t,s,n,i,o){let r={},a={},l={},u={inputs:{},dependencies:{},directory:n.directory?n.directory:"\x2e",command:n.command,switches:n.switches},h=p(e,s,o);return@.async.all(n.inputs,-1,function(t){let s=c(e,t);@.fs.isAbspath(s)?this.next():m(t,o,!1,!0).then(function(e){r[s]=e,this.next()}).pipe(this)}).then(function(){Object.keys(r).sort().forEach(e=>{u.inputs[e]=r[e].sha1}),this.next()}).all(n.dependencies,-1,function(t){let s=c(e,t);@.fs.isAbspath(s)?this.next():m(t,o,!1,!0).then(function(e){a[s]=e,this.next()}).pipe(this)}).then(function(){Object.keys(a).sort().forEach(e=>{u.dependencies[e]=a[e].sha1}),this.next()}).then(function(){const n=d(u);h&&h.sha1===n&&0===Object.keys(h.outputs).filter(e=>!@.fs.exists(e)).length?(@debug("\x20\x20CACHE\x20"+t+"\x20["+h.date+"]"),this.next({inputs:Object.keys(h.inputs).map(t=>@.fs.resolvePath(e,t)),dependencies:Object.keys(h.dependencies).map(t=>@.fs.resolvePath(e,t)),outputs:Object.keys(h.outputs).map(t=>@.fs.resolvePath(e,t)),directory:h.directory,command:h.command,switches:h.switches})):i().then(function(t){@.async.all(t.outputs.sort(),function(t){@.fs.exists(t)?m(t,o,!0).then(function(s){let n=c(e,t);l[n]=s,this.next()}).pipe(this):this.next()}).then(function(){@.fs.makeDirs(@.fs.dirname(s)),@.fs.writeFile(s,JSON.stringify({sha1:n,date:@.format.date(new Date,"YYYY\x2dM\x2dD\x20hh:mm:ss\x2eSSS"),command:u.command,switches:u.switches,directory:u.directory,inputs:r,dependencies:a,outputs:l},null,4)).pipe(this)}).resolve(t).pipe(this)}).pipe(this)})},formatPathForCommand:function(e,t,s){const n=c(e,t);return@.fs.isAbspath(n)?@.fs.realOSPath(n):s?@.fs.posixOSPath(n):@.fs.winOSPath(n)},commandError:function(e,t,s,n){let i=new Error("Failed\x20to\x20e\x78ecute\x20command:\x20"+@.fs.filename(e));return i.command=e,i.switches=t,i.stdout=s,i.stderr=n,i},analyzeCommand:function(e,t){t||(t=[]);let s=e.split(/\s+/);return{command:s[0],switches:s.slice(1).concat(t)}},formatCommand:function(e,t,s,n){return[e].concat(t).map(e=>u(e,n)).join(s?"\x20":"\x20\\\n\x20\x20")},getIDPath:l,resolvePath:function(e,t,s,n){n&&(s=@.fs.changeExtname(s,n));let i=l(t,s);return@path(e,i)},hostPlatform:b,hostArch:v,guessCToolchain:h,resolveDirectories:function(e,t){let s=[];return t.forEach(t=>{"@"===t[0]?(t=e.getAbsolutePath(t.slice(1)),@.fs.scanFiles.sync(t,1/0,e=>"dir"===e.type).forEach(n=>{s.push(e.getAbsolutePath(@.fs.rootBasedPath(t,n.path)))})):(t=e.getAbsolutePath(t),s.push(t))}),s},getCConfig:function(e,t,s){return e||(e=v),t||(t=b),s||(s=h(t)),{arch:e,platform:t,toolchain:s}},getCOutputExtname:x,getCOutputName:function(e,t,s,n){let i=x(e,t,s);return"archive"!==s&&"library"!==s||"windows"===e||"lib"===n.slice(0,3)?n+i:"lib"+n+i},scanFiles:function(e,t,s,n,i){let o=s.slice(0).sort().join("\x2c");n.scans[t]||(n.scans[t]=Object.create(null)),@.fs.isUnderDir(e,t)&&n.scans[e]&&n.scans[e][""]&&!n.scans[t][""]&&(n.scans[t][""]=n.scans[e][""].filter(e=>@.fs.isUnderDir(t,e)));let r=s.map(e=>@.as(e,"rege\x78\x2dpath"));if(n.scans[t][""]&&!n.scans[t][o]){let e=[];n.scans[t][o]=n.scans[t][""].filter(s=>{const n=@.fs.realOSPath(s),o=@.fs.rootBasedPath(@.fs.realOSPath(t),n);for(let t of r)if(t.test(o))return e.push(s),i&&i(s),!1;return!0}),n.scans[t]["\x21"+o]=e}if(n.scans[t][o]){if(n.scans[t]["\x21"+o]&&i)for(let e of n.scans[t]["\x21"+o])i(e);return@debug("Found\x20"+n.scans[t][o].length+"\x20\x66iles\x20\x28via\x20cache\x29"),n.scans[t][o]}let a=[];return@.fs.scanFiles.sync(t,1/0,s=>{const n=@.fs.realOSPath(s.path),o=@.fs.rootBasedPath(@.fs.realOSPath(t),n),a=@.fs.rootBasedPath(@.fs.realOSPath(e),n);if("\x2e"===o)return"dir"===s.type;if("\x2e"===@.fs.filename(o)[0])return!1;for(let e of r)if(e.test(o))return i&&i(s.path),!1;return"\x66ile"===s.type||"dir"===s.type&&-1===["build","dist"].indexOf(a)}).filter(e=>"\x66ile"===e.type).map(e=>{a.push(e.path),n.files[e.path]=@.format.date(e.modifyTime,"YYYY\x2dMM\x2dDD\x20hh:mm:ss\x2eSSS")}),@debug("Found\x20"+a.length+"\x20\x66iles"),a.sort(),n.scans[t][o]=a,a},sha1Hash:d,resolveCommand:y,executeCommand:function(e,t,s,n){return y(e,s,n).then(function(e){@.task.execute(e,t,{silent:!0,cwd:s,env:n},this.next)})},updateSignatures:function(e,t,s,n){let i=t.outputs.map(t=>c(e,t));return@.async.all(t.inputs,function(t){let o=c(e,t);@.fs.isAbspath(o)?this.next():m(t,s).then(function(e){s.state.triggers[o]||(s.state.triggers[o]=Object.create(null)),s.state.triggers[o][n]=i,s.state.inputs[o]=e,this.next()}).pipe(this)}).all(t.dependencies,function(t){let o=c(e,t);@.fs.isAbspath(o)?this.next():m(t,s).then(function(e){s.state.triggers[o]||(s.state.triggers[o]=Object.create(null)),s.state.triggers[o][n]=i,s.state.dependencies[o]=e,this.next()}).pipe(this)}).all(t.outputs,function(t){let n=c(e,t);if(@.fs.isAbspath(n))this.next();else{if(!@.fs.exists(t))return void this.next();m(t,s).then(function(e){s.state.outputs[n]=e,this.next()}).pipe(this)}})},getFileSignature:m,skipIfTriggersSilent:function(e,t,s,n,i,o){let r=!1;if(t.triggeds?t.triggeds[s]&&t.triggeds[s][n]&&(r=!0):r=!0,!r){let s=p(e,i,t);if(s)return@.async.resolve({inputs:Object.keys(s.inputs).map(t=>@.fs.resolvePath(e,t)),dependencies:Object.keys(s.dependencies).map(t=>@.fs.resolvePath(e,t)),outputs:Object.keys(s.outputs).map(t=>@.fs.resolvePath(e,t)),directory:s.directory,command:s.command,switches:s.switches})}return o()},escapeCommandComponent:u,cacheRootBasedPath:c},t!==o&&(e.exports=t)},module.exports=b("\x2e\x2fbin\x2ejs")}();